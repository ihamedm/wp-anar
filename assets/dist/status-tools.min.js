/*! For license information please see status-tools.min.js.LICENSE.txt */
(()=>{var t={736:function(t){var e,n;e=this,n=function(t){var e=function(t){return new e.lib.init(t)};function n(t,e){return e.offset[t]?isNaN(e.offset[t])?e.offset[t]:e.offset[t]+"px":"0px"}function a(t,e){return!(!t||"string"!=typeof e||!(t.className&&t.className.trim().split(/\s+/gi).indexOf(e)>-1))}return e.defaults={oldestFirst:!0,text:"Toastify is awesome!",node:void 0,duration:3e3,selector:void 0,callback:function(){},destination:void 0,newWindow:!1,close:!1,gravity:"toastify-top",positionLeft:!1,position:"",backgroundColor:"",avatar:"",className:"",stopOnFocus:!0,onClick:function(){},offset:{x:0,y:0},escapeMarkup:!0,ariaLive:"polite",style:{background:""}},e.lib=e.prototype={toastify:"1.12.0",constructor:e,init:function(t){return t||(t={}),this.options={},this.toastElement=null,this.options.text=t.text||e.defaults.text,this.options.node=t.node||e.defaults.node,this.options.duration=0===t.duration?0:t.duration||e.defaults.duration,this.options.selector=t.selector||e.defaults.selector,this.options.callback=t.callback||e.defaults.callback,this.options.destination=t.destination||e.defaults.destination,this.options.newWindow=t.newWindow||e.defaults.newWindow,this.options.close=t.close||e.defaults.close,this.options.gravity="bottom"===t.gravity?"toastify-bottom":e.defaults.gravity,this.options.positionLeft=t.positionLeft||e.defaults.positionLeft,this.options.position=t.position||e.defaults.position,this.options.backgroundColor=t.backgroundColor||e.defaults.backgroundColor,this.options.avatar=t.avatar||e.defaults.avatar,this.options.className=t.className||e.defaults.className,this.options.stopOnFocus=void 0===t.stopOnFocus?e.defaults.stopOnFocus:t.stopOnFocus,this.options.onClick=t.onClick||e.defaults.onClick,this.options.offset=t.offset||e.defaults.offset,this.options.escapeMarkup=void 0!==t.escapeMarkup?t.escapeMarkup:e.defaults.escapeMarkup,this.options.ariaLive=t.ariaLive||e.defaults.ariaLive,this.options.style=t.style||e.defaults.style,t.backgroundColor&&(this.options.style.background=t.backgroundColor),this},buildToast:function(){if(!this.options)throw"Toastify is not initialized";var t=document.createElement("div");for(var e in t.className="toastify on "+this.options.className,this.options.position?t.className+=" toastify-"+this.options.position:!0===this.options.positionLeft?t.className+=" toastify-left":t.className+=" toastify-right",t.className+=" "+this.options.gravity,this.options.backgroundColor,this.options.style)t.style[e]=this.options.style[e];if(this.options.ariaLive&&t.setAttribute("aria-live",this.options.ariaLive),this.options.node&&this.options.node.nodeType===Node.ELEMENT_NODE)t.appendChild(this.options.node);else if(this.options.escapeMarkup?t.innerText=this.options.text:t.innerHTML=this.options.text,""!==this.options.avatar){var a=document.createElement("img");a.src=this.options.avatar,a.className="toastify-avatar","left"==this.options.position||!0===this.options.positionLeft?t.appendChild(a):t.insertAdjacentElement("afterbegin",a)}if(!0===this.options.close){var o=document.createElement("button");o.type="button",o.setAttribute("aria-label","Close"),o.className="toast-close",o.innerHTML="&#10006;",o.addEventListener("click",function(t){t.stopPropagation(),this.removeElement(this.toastElement),window.clearTimeout(this.toastElement.timeOutValue)}.bind(this));var s=window.innerWidth>0?window.innerWidth:screen.width;("left"==this.options.position||!0===this.options.positionLeft)&&s>360?t.insertAdjacentElement("afterbegin",o):t.appendChild(o)}if(this.options.stopOnFocus&&this.options.duration>0){var i=this;t.addEventListener("mouseover",(function(e){window.clearTimeout(t.timeOutValue)})),t.addEventListener("mouseleave",(function(){t.timeOutValue=window.setTimeout((function(){i.removeElement(t)}),i.options.duration)}))}if(void 0!==this.options.destination&&t.addEventListener("click",function(t){t.stopPropagation(),!0===this.options.newWindow?window.open(this.options.destination,"_blank"):window.location=this.options.destination}.bind(this)),"function"==typeof this.options.onClick&&void 0===this.options.destination&&t.addEventListener("click",function(t){t.stopPropagation(),this.options.onClick()}.bind(this)),"object"==typeof this.options.offset){var r=n("x",this.options),c=n("y",this.options),l="left"==this.options.position?r:"-"+r,d="toastify-top"==this.options.gravity?c:"-"+c;t.style.transform="translate("+l+","+d+")"}return t},showToast:function(){var t;if(this.toastElement=this.buildToast(),!(t="string"==typeof this.options.selector?document.getElementById(this.options.selector):this.options.selector instanceof HTMLElement||"undefined"!=typeof ShadowRoot&&this.options.selector instanceof ShadowRoot?this.options.selector:document.body))throw"Root element is not defined";var n=e.defaults.oldestFirst?t.firstChild:t.lastChild;return t.insertBefore(this.toastElement,n),e.reposition(),this.options.duration>0&&(this.toastElement.timeOutValue=window.setTimeout(function(){this.removeElement(this.toastElement)}.bind(this),this.options.duration)),this},hideToast:function(){this.toastElement.timeOutValue&&clearTimeout(this.toastElement.timeOutValue),this.removeElement(this.toastElement)},removeElement:function(t){t.className=t.className.replace(" on",""),window.setTimeout(function(){this.options.node&&this.options.node.parentNode&&this.options.node.parentNode.removeChild(this.options.node),t.parentNode&&t.parentNode.removeChild(t),this.options.callback.call(t),e.reposition()}.bind(this),400)}},e.reposition=function(){for(var t,e={top:15,bottom:15},n={top:15,bottom:15},o={top:15,bottom:15},s=document.getElementsByClassName("toastify"),i=0;i<s.length;i++){t=!0===a(s[i],"toastify-top")?"toastify-top":"toastify-bottom";var r=s[i].offsetHeight;t=t.substr(9,t.length-1),(window.innerWidth>0?window.innerWidth:screen.width)<=360?(s[i].style[t]=o[t]+"px",o[t]+=r+15):!0===a(s[i],"toastify-left")?(s[i].style[t]=e[t]+"px",e[t]+=r+15):(s[i].style[t]=n[t]+"px",n[t]+=r+15)}return this},e.lib.init.prototype=e.lib,e},t.exports?t.exports=n():e.Toastify=n()}},e={};function n(a){var o=e[a];if(void 0!==o)return o.exports;var s=e[a]={exports:{}};return t[a].call(s.exports,s,s.exports,n),s.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var a in e)n.o(e,a)&&!n.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function e(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var o,s,i,r,c,l=(o=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],s=function(){function n(t){var a=t.targetModal,o=t.triggers,s=void 0===o?[]:o,i=t.onShow,r=void 0===i?function(){}:i,c=t.onClose,l=void 0===c?function(){}:c,d=t.openTrigger,u=void 0===d?"data-micromodal-trigger":d,p=t.closeTrigger,f=void 0===p?"data-micromodal-close":p,h=t.openClass,m=void 0===h?"is-open":h,v=t.disableScroll,g=void 0!==v&&v,y=t.disableFocus,b=void 0!==y&&y,w=t.awaitCloseAnimation,_=void 0!==w&&w,x=t.awaitOpenAnimation,k=void 0!==x&&x,j=t.debugMode,E=void 0!==j&&j;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.modal=document.getElementById(a),this.config={debugMode:E,disableScroll:g,openTrigger:u,closeTrigger:f,openClass:m,onShow:r,onClose:l,awaitCloseAnimation:_,awaitOpenAnimation:k,disableFocus:b},s.length>0&&this.registerTriggers.apply(this,e(s)),this.onClick=this.onClick.bind(this),this.onKeydown=this.onKeydown.bind(this)}var a,s;return a=n,(s=[{key:"registerTriggers",value:function(){for(var t=this,e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];n.filter(Boolean).forEach((function(e){e.addEventListener("click",(function(e){return t.showModal(e)}))}))}},{key:"showModal",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.activeElement=document.activeElement,this.modal.setAttribute("aria-hidden","false"),this.modal.classList.add(this.config.openClass),this.scrollBehaviour("disable"),this.addEventListeners(),this.config.awaitOpenAnimation){this.modal.addEventListener("animationend",(function e(){t.modal.removeEventListener("animationend",e,!1),t.setFocusToFirstNode()}),!1)}else this.setFocusToFirstNode();this.config.onShow(this.modal,this.activeElement,e)}},{key:"closeModal",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.modal;if(this.modal.setAttribute("aria-hidden","true"),this.removeEventListeners(),this.scrollBehaviour("enable"),this.activeElement&&this.activeElement.focus&&this.activeElement.focus(),this.config.onClose(this.modal,this.activeElement,t),this.config.awaitCloseAnimation){var n=this.config.openClass;this.modal.addEventListener("animationend",(function t(){e.classList.remove(n),e.removeEventListener("animationend",t,!1)}),!1)}else e.classList.remove(this.config.openClass)}},{key:"closeModalById",value:function(t){this.modal=document.getElementById(t),this.modal&&this.closeModal()}},{key:"scrollBehaviour",value:function(t){if(this.config.disableScroll){var e=document.querySelector("body");switch(t){case"enable":Object.assign(e.style,{overflow:""});break;case"disable":Object.assign(e.style,{overflow:"hidden"})}}}},{key:"addEventListeners",value:function(){this.modal.addEventListener("touchstart",this.onClick),this.modal.addEventListener("click",this.onClick),document.addEventListener("keydown",this.onKeydown)}},{key:"removeEventListeners",value:function(){this.modal.removeEventListener("touchstart",this.onClick),this.modal.removeEventListener("click",this.onClick),document.removeEventListener("keydown",this.onKeydown)}},{key:"onClick",value:function(t){(t.target.hasAttribute(this.config.closeTrigger)||t.target.parentNode.hasAttribute(this.config.closeTrigger))&&(t.preventDefault(),t.stopPropagation(),this.closeModal(t))}},{key:"onKeydown",value:function(t){27===t.keyCode&&this.closeModal(t),9===t.keyCode&&this.retainFocus(t)}},{key:"getFocusableNodes",value:function(){var t=this.modal.querySelectorAll(o);return Array.apply(void 0,e(t))}},{key:"setFocusToFirstNode",value:function(){var t=this;if(!this.config.disableFocus){var e=this.getFocusableNodes();if(0!==e.length){var n=e.filter((function(e){return!e.hasAttribute(t.config.closeTrigger)}));n.length>0&&n[0].focus(),0===n.length&&e[0].focus()}}}},{key:"retainFocus",value:function(t){var e=this.getFocusableNodes();if(0!==e.length)if(e=e.filter((function(t){return null!==t.offsetParent})),this.modal.contains(document.activeElement)){var n=e.indexOf(document.activeElement);t.shiftKey&&0===n&&(e[e.length-1].focus(),t.preventDefault()),!t.shiftKey&&e.length>0&&n===e.length-1&&(e[0].focus(),t.preventDefault())}else e[0].focus()}}])&&t(a.prototype,s),n}(),i=null,r=function(t){if(!document.getElementById(t))return!1},c=function(t,e){if(function(t){t.length}(t),!e)return!0;for(var n in e)r(n);return!0},{init:function(t){var n=Object.assign({},{openTrigger:"data-micromodal-trigger"},t),a=e(document.querySelectorAll("[".concat(n.openTrigger,"]"))),o=function(t,e){var n=[];return t.forEach((function(t){var a=t.attributes[e].value;void 0===n[a]&&(n[a]=[]),n[a].push(t)})),n}(a,n.openTrigger);if(!0!==n.debugMode||!1!==c(a,o))for(var r in o){var l=o[r];n.targetModal=r,n.triggers=e(l),i=new s(n)}},show:function(t,e){var n=e||{};n.targetModal=t,!0===n.debugMode&&!1===r(t)||(i&&i.removeEventListeners(),(i=new s(n)).showModal())},close:function(t){t?i.closeModalById(t):i.closeModal()}});"undefined"!=typeof window&&(window.MicroModal=l);const d=l;var u=n(736),p=n.n(u);function f(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error";null!=t&&p()({text:t,duration:5e3,newWindow:!0,close:!0,style:{background:"error"===e?"#cc3e3e":"success"===e?"#25ae25":"#373636"},gravity:"bottom",position:"left",stopOnFocus:!0}).showToast()}const h=jQuery;var m=n.n(h);function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function y(t,e,n){return(e=w(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,w(a.key),a)}}function w(t){var e=function(t,e){if("object"!=v(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var a=n.call(t,e||"default");if("object"!=v(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==v(e)?e:e+""}var _=function(){return function(t,e,n){return e&&b(t.prototype,e),n&&b(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.config=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach((function(e){y(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({modalId:e.modalId,buttonId:e.buttonId,title:e.title,action:e.action,changeStatusAction:e.changeStatusAction,changeStatusText:e.changeStatusText,warningText:e.warningText},e),this.init()}),[{key:"init",value:function(){var t=this;m()(document).ready((function(){m()("#".concat(t.config.buttonId)).on("click",(function(e){e.preventDefault(),t.showModal()})),t.config.changeStatusAction&&m()("#".concat(t.config.modalId,"-change-status")).on("click",(function(e){e.preventDefault(),t.changeStatus()}))}))}},{key:"showModal",value:function(){m()("#".concat(this.config.modalId,"-loading")).show(),m()("#".concat(this.config.modalId,"-content")).hide(),MicroModal.show(this.config.modalId),this.fetchData()}},{key:"fetchData",value:function(){var t=this;m().ajax({url:awca_ajax_object.ajax_url,type:"POST",data:{action:this.config.action,nonce:awca_ajax_object.nonce},success:function(e){e.success?t.handleSuccess(e.data):t.handleError(e.data)},error:function(e,n,a){t.handleError("خطا در ارتباط با سرور")}})}},{key:"handleSuccess",value:function(t){void 0!==t.count&&m()("#".concat(this.config.modalId,"-count")).text(t.count),void 0!==t.total_products&&m()("#".concat(this.config.modalId,"-total")).text(t.total_products),m()("#".concat(this.config.modalId,"-list")).html(t.html),this.config.changeStatusAction&&(t.count>0?m()("#".concat(this.config.modalId,"-change-status")).show():m()("#".concat(this.config.modalId,"-change-status")).hide()),m()("#".concat(this.config.modalId,"-loading")).hide(),m()("#".concat(this.config.modalId,"-content")).show()}},{key:"handleError",value:function(t){m()("#".concat(this.config.modalId,"-loading")).hide(),m()("#".concat(this.config.modalId,"-content")).html('<p style="text-align: center; color: #dc3232; padding: 20px;">خطا در دریافت اطلاعات: '.concat(t,"</p>")).show()}},{key:"changeStatus",value:function(){var t=this;if(confirm(this.config.warningText||"آیا مطمئن هستید؟")){var e=m()("#".concat(this.config.modalId,"-change-status")),n=e.html();e.prop("disabled",!0).html('<span class="dashicons dashicons-update"></span> در حال تغییر وضعیت...'),m().ajax({url:awca_ajax_object.ajax_url,type:"POST",data:{action:this.config.changeStatusAction,nonce:awca_ajax_object.nonce},success:function(e){e.success?(f(e.data.message,"success"),t.fetchData()):f(e.data.message||"خطا در تغییر وضعیت","error")},error:function(t,e,n){f("خطا در ارتباط با سرور","error")},complete:function(){e.prop("disabled",!1).html(n)}})}}}])}();function x(t){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x(t)}function k(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var a,o,s,i,r=[],c=!0,l=!1;try{if(s=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=s.call(n)).done)&&(r.push(a.value),r.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return r}}(t,e)||function(t,e){if(t){if("string"==typeof t)return j(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=Array(e);n<e;n++)a[n]=t[n];return a}function E(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,O(a.key),a)}}function O(t){var e=function(t,e){if("object"!=x(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var a=n.call(t,e||"default");if("object"!=x(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==x(e)?e:e+""}var T=function(){return function(t,e,n){return e&&E(t.prototype,e),n&&E(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.widgets={},this.init()}),[{key:"init",value:function(){var t=this;m()(document).ready((function(){t.bindEvents()}))}},{key:"bindEvents",value:function(){var t=this;m()(document).on("click",".anar-widget-actions button[data-action]",(function(e){e.preventDefault();var n=m()(e.currentTarget),a=n.data("action"),o=n.data("widget");t.loadWidgetData(o,a,n)}))}},{key:"loadWidgetData",value:function(t,e,n){var a=this,o=m()("#".concat(t)),s=o.find(".anar-widget-loading"),i=o.find(".anar-widget-results"),r=o.find(".anar-widget-error"),c=n.html();s.show(),i.hide(),r.hide(),n.prop("disabled",!0).html('<span class="spinner is-active"></span> در حال بارگذاری...'),m().ajax({url:awca_ajax_object.ajax_url,type:"POST",data:{action:e,nonce:awca_ajax_object.nonce},success:function(t){t.success?(a.displayWidgetData(o,t.data),f("گزارش با موفقیت دریافت شد","success")):(a.displayWidgetError(o,t.data.message||"خطا در دریافت گزارش"),f(t.data.message||"خطا در دریافت گزارش","error"))},error:function(t,e,n){a.displayWidgetError(o,"خطا در ارتباط با سرور: ".concat(t.status," - ").concat(t.statusText)),f("خطا در ارتباط با سرور","error")},complete:function(){s.hide(),n.prop("disabled",!1).html(c)}})}},{key:"displayWidgetData",value:function(t,e){var n=t.find(".anar-widget-results"),a=this.generateWidgetHTML(e);n.html(a).show()}},{key:"displayWidgetError",value:function(t,e){t.find(".anar-widget-error").html('<div class="notice notice-error"><p>'.concat(e,"</p></div>")).show()}},{key:"generateWidgetHTML",value:function(t){var e="";return t.wp_info&&(e+=this.generateSystemInfoHTML(t)),t.tables&&(e+=this.generateDatabaseHealthHTML(t)),t.total_products&&(e+=this.generateProductStatsHTML(t)),t.anar_logs&&(e+=this.generateErrorLogHTML(t)),e||"<p>هیچ داده‌ای یافت نشد.</p>"}},{key:"generateSystemInfoHTML",value:function(t){var e=this,n='<div class="anar-widget-section">';return n+="<h4>اطلاعات وردپرس</h4>",n+='<div class="anar-info-grid">',Object.entries(t.wp_info).forEach((function(t){var a=k(t,2),o=a[0],s=a[1];n+='<div class="anar-info-item">\n                <span class="anar-info-label">'.concat(e.getLabel(o),':</span>\n                <span class="anar-info-value">').concat(s,"</span>\n            </div>")})),n+="</div></div>",t.wc_info&&Object.keys(t.wc_info).length>0&&(n+='<div class="anar-widget-section">',n+="<h4>اطلاعات ووکامرس</h4>",n+='<div class="anar-info-grid">',Object.entries(t.wc_info).forEach((function(t){var a=k(t,2),o=a[0],s=a[1];n+='<div class="anar-info-item">\n                    <span class="anar-info-label">'.concat(e.getLabel(o),':</span>\n                    <span class="anar-info-value">').concat(s,"</span>\n                </div>")})),n+="</div></div>"),t.anar_info&&(n+='<div class="anar-widget-section">',n+="<h4>اطلاعات انار</h4>",n+='<div class="anar-info-grid">',Object.entries(t.anar_info).forEach((function(t){var a=k(t,2),o=a[0],s=a[1];n+='<div class="anar-info-item">\n                    <span class="anar-info-label">'.concat(e.getLabel(o),':</span>\n                    <span class="anar-info-value">').concat(s,"</span>\n                </div>")})),n+="</div></div>"),n}},{key:"generateDatabaseHealthHTML",value:function(t){var e='<div class="anar-widget-section">';return e+="<h4>وضعیت جداول</h4>",e+='<div class="anar-table-health">',Object.entries(t.tables).forEach((function(t){var n=k(t,2),a=(n[0],n[1]),o="good"===a.status?"status-good":"status-warning";e+='<div class="anar-table-item">\n                <div class="anar-table-name">'.concat(a.name,'</div>\n                <div class="anar-table-details">\n                    <span>ردیف‌ها: ').concat(a.rows,"</span>\n                    <span>اندازه داده: ").concat(a.data_length,"</span>\n                    <span>موتور: ").concat(a.engine,'</span>\n                    <span class="').concat(o,'">').concat("good"===a.status?"✓":"⚠","</span>\n                </div>\n            </div>")})),e+="</div></div>",t.indexes&&(e+='<div class="anar-widget-section">',e+="<h4>وضعیت ایندکس‌ها</h4>",e+='<div class="anar-indexes-health">',Object.entries(t.indexes).forEach((function(t){var n=k(t,2),a=(n[0],n[1]),o="good"===a.status?"status-good":"status-warning";e+='<div class="anar-index-item">\n                    <span class="anar-index-name">'.concat(a.name,'</span>\n                    <span class="').concat(o,'">').concat(a.exists?"✓ موجود":"✗ موجود نیست","</span>\n                </div>")})),e+="</div></div>"),e}},{key:"generateProductStatsHTML",value:function(t){var e=this,n='<div class="anar-widget-section">';return n+="<h4>آمار کلی محصولات</h4>",n+='<div class="anar-stats-grid">',Object.entries(t.total_products).forEach((function(t){var a=k(t,2),o=a[0],s=a[1];n+='<div class="anar-stat-item">\n                <span class="anar-stat-label">'.concat(e.getStatusLabel(o),':</span>\n                <span class="anar-stat-value">').concat(s,"</span>\n            </div>")})),n+="</div></div>",t.anar_products&&(n+='<div class="anar-widget-section">',n+="<h4>محصولات انار</h4>",n+='<div class="anar-stats-grid">',Object.entries(t.anar_products).forEach((function(t){var a=k(t,2),o=a[0],s=a[1];n+='<div class="anar-stat-item">\n                    <span class="anar-stat-label">'.concat(e.getLabel(o),':</span>\n                    <span class="anar-stat-value">').concat(s,"</span>\n                </div>")})),n+="</div></div>"),t.sync_status&&(n+='<div class="anar-widget-section">',n+="<h4>وضعیت همگام‌سازی</h4>",n+='<div class="anar-stats-grid">',Object.entries(t.sync_status).forEach((function(t){var a=k(t,2),o=a[0],s=a[1];n+='<div class="anar-stat-item">\n                    <span class="anar-stat-label">'.concat(e.getLabel(o),':</span>\n                    <span class="anar-stat-value">').concat(s,"</span>\n                </div>")})),n+="</div></div>"),n}},{key:"generateErrorLogHTML",value:function(t){var e=this,n='<div class="anar-widget-section">';return t.summary&&(n+="<h4>خلاصه خطاها (24 ساعت گذشته)</h4>",n+='<div class="anar-error-summary">',t.summary.total_errors>0?(n+='<div class="anar-error-total">کل خطاها: <strong>'.concat(t.summary.total_errors,"</strong></div>"),Object.entries(t.summary.last_24h).forEach((function(t){var a=k(t,2),o=a[0],s=a[1];n+='<div class="anar-error-level '.concat("critical"===o?"status-critical":"error"===o?"status-warning":"status-good",'">').concat(e.getLevelLabel(o),": ").concat(s,"</div>")}))):n+='<div class="status-good">هیچ خطایی در 24 ساعت گذشته ثبت نشده است</div>',n+="</div>"),t.anar_logs&&t.anar_logs.length>0&&(n+='<div class="anar-widget-section">',n+="<h4>آخرین خطاهای انار</h4>",n+='<div class="anar-error-logs">',t.anar_logs.slice(0,10).forEach((function(t){var a="critical"===t.level?"status-critical":"status-warning";n+='<div class="anar-error-log-item">\n                    <div class="anar-error-log-header">\n                        <span class="anar-error-level '.concat(a,'">').concat(e.getLevelLabel(t.level),'</span>\n                        <span class="anar-error-time">').concat(t.created_at,'</span>\n                    </div>\n                    <div class="anar-error-message">').concat(t.message,"</div>\n                </div>")})),n+="</div></div>"),n+="</div>"}},{key:"getLabel",value:function(t){return{version:"نسخه",multisite:"چندسایتی",language:"زبان",timezone:"منطقه زمانی",memory_limit:"حد حافظه",max_execution_time:"حد زمان اجرا",currency:"واحد پول",products_count:"تعداد محصولات",orders_count:"تعداد سفارشات",php_version:"نسخه PHP",mysql_version:"نسخه MySQL",server_software:"نرم‌افزار سرور",upload_max_filesize:"حد آپلود فایل",post_max_size:"حد اندازه پست",plugin_version:"نسخه افزونه",anar_products:"محصولات انار",last_sync:"آخرین همگام‌سازی",total:"کل",with_prices:"با قیمت",zero_profit:"سود صفر",deprecated:"منسوخ شده",recently_synced:"همگام‌سازی شده",not_synced_recently:"همگام‌سازی نشده",never_synced:"هرگز همگام‌سازی نشده",created_today:"ایجاد شده امروز",updated_today:"به‌روزرسانی شده امروز"}[t]||t}},{key:"getStatusLabel",value:function(t){return{published:"منتشر شده",draft:"پیش‌نویس",pending:"در انتظار بررسی",private:"خصوصی",trash:"سطل زباله"}[t]||t}},{key:"getLevelLabel",value:function(t){return{critical:"بحرانی",error:"خطا",warning:"هشدار",info:"اطلاعات"}[t]||t}}])}();jQuery(document).ready((function(t){d.init(),jQuery(document).ready((function(t){t("#anar-create-indexes").on("click",(function(e){e.preventDefault();var n=t(this),a=n.html();n.prop("disabled",!0).html('<span class="dashicons dashicons-update"></span> در حال بهینه‌سازی...'),t("#anar-performance-status").show(),t("#anar-performance-message").html('<span class="dashicons dashicons-update" style="animation: spin 1s linear infinite;"></span> در حال بهینه‌سازی پایگاه داده...'),t.ajax({url:awca_ajax_object.ajax_url,type:"POST",data:{action:"anar_create_indexes"},success:function(e){if(e.success){var n=e.data,a='\n                          <div style="margin-bottom: 15px;">\n                            <span class="dashicons dashicons-yes-alt" style="color: #46b450;"></span> '.concat(n.message,"\n                          </div>\n                        ");t("#anar-performance-message").html(a),f(n.message,"success")}else t("#anar-performance-message").html('<span class="dashicons dashicons-warning" style="color: #dc3232;"></span> '+e.data.message),f(e.data.message,"error")},error:function(e,n,a){var o="خطا در ارتباط با سرور";t("#anar-performance-message").html('<span class="dashicons dashicons-warning" style="color: #dc3232;"></span> '+o),f(o,"error")},complete:function(){n.prop("disabled",!1).html(a)}})}))})),jQuery(document).ready((function(t){t("#anar-clear-sync-times").on("click",(function(e){confirm("تایم آخرین بروزرسانی همه محصولات ریست می شوند و باید صبر کنید تا همه محصولاتت مجدد سینک شوند. مطمئنید؟"),e.preventDefault();var n=t(this),a=n.html();n.prop("disabled",!0).html('<span class="dashicons dashicons-update"></span> در حال بهینه‌سازی...'),t("#anar-performance-status").show(),t("#anar-performance-message").html('<span class="dashicons dashicons-update" style="animation: spin 1s linear infinite;"></span> در حال بهینه‌سازی پایگاه داده...'),t.ajax({url:awca_ajax_object.ajax_url,type:"POST",data:{action:"anar_clear_sync_times"},success:function(e){if(e.success){var n=e.data,a='\n                          <div style="margin-bottom: 15px;">\n                            <span class="dashicons dashicons-yes-alt" style="color: #46b450;"></span> '.concat(n.message,'\n                            <div style="margin-top: 10px; font-size: 12px; color: #666;">\n                              <strong>جزئیات:</strong><br>\n                              • محصولات بروزرسانی شده: ').concat(n.updated_count,"<br>\n                              • محصولات جدید اضافه شده: ").concat(n.inserted_count,"<br>\n                              • کل محصولات پردازش شده: ").concat(n.total_processed,"<br>\n                              • تاریخ تنظیم شده: ").concat(n.reset_date,"\n                            </div>\n                          </div>\n                        ");t("#anar-performance-message").html(a),f(n.message,"success")}else t("#anar-performance-message").html('<span class="dashicons dashicons-warning" style="color: #dc3232;"></span> '+e.data.message),f(e.data.message,"error")},error:function(e,n,a){var o="خطا در ارتباط با سرور";t("#anar-performance-message").html('<span class="dashicons dashicons-warning" style="color: #dc3232;"></span> '+o),f(o,"error")},complete:function(){n.prop("disabled",!1).html(a)}})})),t("#anar-manual-sync-outdated").on("click",(function(e){e.preventDefault();var n=t(this),a=n.html();n.prop("disabled",!0).html('<span class="dashicons dashicons-update"></span> در حال اجرا...'),t("#anar-performance-status").show(),t("#anar-performance-message").html('<span class="dashicons dashicons-update" style="animation: spin 1s linear infinite;"></span> در حال اجرای همگام‌سازی محصولات منسوخ...'),t.ajax({url:awca_ajax_object.ajax_url,type:"POST",data:{action:"anar_manual_sync_outdated"},success:function(e){if(e.success){var n=e.data,a='\n                          <div style="margin-bottom: 15px;">\n                            <span class="dashicons dashicons-yes-alt" style="color: #46b450;"></span> '.concat(n.message,'\n                            <div style="margin-top: 10px; font-size: 12px; color: #666;">\n                              <strong>جزئیات:</strong><br>\n                              • محصولات پردازش شده: ').concat(n.processed,"<br>\n                              • محصولات ناموفق: ").concat(n.failed,"<br>\n                              • کل محصولات بررسی شده: ").concat(n.total_checked,"\n                            </div>\n                          </div>\n                        ");t("#anar-performance-message").html(a),f(n.message,"success")}else t("#anar-performance-message").html('<span class="dashicons dashicons-warning" style="color: #dc3232;"></span> '+e.data.message),f(e.data.message,"error")},error:function(e,n,a){var o="خطا در ارتباط با سرور";t("#anar-performance-message").html('<span class="dashicons dashicons-warning" style="color: #dc3232;"></span> '+o),f(o,"error")},complete:function(){n.prop("disabled",!1).html(a)}})}))})),jQuery(document).ready((function(t){t("#anar-test-performance").on("click",(function(e){e.preventDefault();var n=t(this),a=n.html();n.prop("disabled",!0).html('<span class="dashicons dashicons-update"></span> در حال تست...'),t("#anar-performance-status").show(),t("#anar-performance-message").html('<span class="dashicons dashicons-update" style="animation: spin 1s linear infinite;"></span> در حال تست عملکرد کوئری‌ها...'),t.ajax({url:awca_ajax_object.ajax_url,type:"POST",data:{action:"anar_test_query_performance"},success:function(e){if(e.success){var n=e.data,a='\n                        <div style="margin-bottom: 15px;">\n                          <h4 style="margin: 0 0 10px 0;">نتایج تست عملکرد:</h4>\n                          <table style="width: 100%; border-collapse: collapse;">\n                            <tr style="border-bottom: 1px solid #ddd;">\n                              <td style="padding: 5px;"><strong>روش قدیمی:</strong></td>\n                              <td style="padding: 5px;">'.concat(n.old_approach.time,"ms (").concat(n.old_approach.count,' محصول)</td>\n                            </tr>\n                            <tr style="border-bottom: 1px solid #ddd;">\n                              <td style="padding: 5px;"><strong>روش جدید:</strong></td>\n                              <td style="padding: 5px;">').concat(n.new_approach.time,"ms (").concat(n.new_approach.count,' محصول)</td>\n                            </tr>\n                            <tr>\n                              <td style="padding: 5px;"><strong>بهبود:</strong></td>\n                              <td style="padding: 5px; color: #46b450; font-weight: bold;">').concat(n.improvement,"% سریع‌تر</td>\n                            </tr>\n                          </table>\n                        </div>\n                      ");t("#anar-performance-message").html('<span class="dashicons dashicons-chart-line" style="color: #46b450;"></span>'+a),f("تست عملکرد با موفقیت انجام شد","success")}else t("#anar-performance-message").html('<span class="dashicons dashicons-warning" style="color: #dc3232;"></span> '+e.data.message),f(e.data.message,"error")},error:function(e,n,a){var o="خطا در ارتباط با سرور";t("#anar-performance-message").html('<span class="dashicons dashicons-warning" style="color: #dc3232;"></span> '+o),f(o,"error")},complete:function(){n.prop("disabled",!1).html(a)}})})),t("#anar-check-index-status").on("click",(function(e){e.preventDefault();var n=t(this),a=n.html();n.prop("disabled",!0).html('<span class="dashicons dashicons-update"></span> در حال بررسی...'),t("#anar-performance-status").show(),t("#anar-performance-message").html('<span class="dashicons dashicons-update" style="animation: spin 1s linear infinite;"></span> در حال بررسی وضعیت ایندکس‌ها...'),t.ajax({url:awca_ajax_object.ajax_url,type:"POST",data:{action:"anar_check_index_status"},success:function(e){if(e.success){var n=e.data,a='<div style="margin-bottom: 15px;">';a+='<h4 style="margin: 0 0 10px 0;">وضعیت ایندکس‌های پایگاه داده:</h4>';var o=n.all_exist?'<span style="color: #46b450; font-weight: bold;">✓ همه ایندکس‌ها موجود هستند</span>':'<span style="color: #dc3232; font-weight: bold;">✗ برخی ایندکس‌ها موجود نیستند</span>';a+='<div style="margin-bottom: 10px;">'.concat(o,"</div>"),a+='<table style="width: 100%; border-collapse: collapse; font-size: 12px;">',a+='<tr style="border-bottom: 1px solid #ddd;"><th style="padding: 5px; text-align: left;">ایندکس</th><th style="padding: 5px; text-align: left;">وضعیت</th></tr>',Object.keys(n.status).forEach((function(t){var e="exists"===n.status[t]?'<span style="color: #46b450;">✓ موجود</span>':'<span style="color: #dc3232;">✗ موجود نیست</span>';a+='<tr style="border-bottom: 1px solid #eee;">\n                          <td style="padding: 5px;">'.concat(t,'</td>\n                          <td style="padding: 5px;">').concat(e,"</td>\n                        </tr>")})),a+="</table>",a+='<div style="margin-top: 10px; font-size: 11px; color: #666;">\n                        '.concat(n.existing_count," از ").concat(n.total_required," ایندکس موجود است\n                      </div>"),a+="</div>",t("#anar-performance-message").html('<span class="dashicons dashicons-list-view" style="color: #0073aa;"></span>'+a),n.all_exist?f("همه ایندکس‌ها موجود هستند","success"):f('برخی ایندکس‌ها موجود نیستند. برای بهبود عملکرد، روی "بهینه‌سازی و ریست زمان‌ها" کلیک کنید.',"warning")}else t("#anar-performance-message").html('<span class="dashicons dashicons-warning" style="color: #dc3232;"></span> '+e.data.message),f(e.data.message,"error")},error:function(e,n,a){var o="خطا در ارتباط با سرور";t("#anar-performance-message").html('<span class="dashicons dashicons-warning" style="color: #dc3232;"></span> '+o),f(o,"error")},complete:function(){n.prop("disabled",!1).html(a)}})}))})),m()(document).ready((function(){new _({modalId:"anar-zero-profit-modal",buttonId:"anar-zero-profit-products",title:"محصولات با سود صفر",action:"anar_get_zero_profit_products",changeStatusAction:null,warningText:null}),new _({modalId:"anar-deprecated-modal",buttonId:"anar-deprecated-products",title:"محصولات منسوخ شده",action:"anar_get_deprecated_products",changeStatusAction:"anar_change_deprecated_status",changeStatusText:'تغییر وضعیت به "در انتظار بررسی"',warningText:'آیا مطمئن هستید که می‌خواهید وضعیت همه محصولات منسوخ را به "در انتظار بررسی" تغییر دهید؟'}),new _({modalId:"anar-duplicate-modal",buttonId:"anar-duplicate-products",title:"محصولات تکراری",action:"anar_get_duplicate_products",changeStatusAction:"anar_change_duplicate_status",changeStatusText:'تغییر وضعیت تکراری‌ها به "در انتظار بررسی"',warningText:'آیا مطمئن هستید که می‌خواهید محصولات تکراری را به "در انتظار بررسی" تغییر دهید؟\n\nقدیمی‌ترین محصول از هر گروه حفظ می‌شود.'})})),new T}))})()})();