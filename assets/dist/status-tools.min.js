/*! For license information please see status-tools.min.js.LICENSE.txt */
(()=>{var t={736:function(t){var n,a;n=this,a=function(t){var n=function(t){return new n.lib.init(t)};function a(t,n){return n.offset[t]?isNaN(n.offset[t])?n.offset[t]:n.offset[t]+"px":"0px"}function e(t,n){return!(!t||"string"!=typeof n||!(t.className&&t.className.trim().split(/\s+/gi).indexOf(n)>-1))}return n.defaults={oldestFirst:!0,text:"Toastify is awesome!",node:void 0,duration:3e3,selector:void 0,callback:function(){},destination:void 0,newWindow:!1,close:!1,gravity:"toastify-top",positionLeft:!1,position:"",backgroundColor:"",avatar:"",className:"",stopOnFocus:!0,onClick:function(){},offset:{x:0,y:0},escapeMarkup:!0,ariaLive:"polite",style:{background:""}},n.lib=n.prototype={toastify:"1.12.0",constructor:n,init:function(t){return t||(t={}),this.options={},this.toastElement=null,this.options.text=t.text||n.defaults.text,this.options.node=t.node||n.defaults.node,this.options.duration=0===t.duration?0:t.duration||n.defaults.duration,this.options.selector=t.selector||n.defaults.selector,this.options.callback=t.callback||n.defaults.callback,this.options.destination=t.destination||n.defaults.destination,this.options.newWindow=t.newWindow||n.defaults.newWindow,this.options.close=t.close||n.defaults.close,this.options.gravity="bottom"===t.gravity?"toastify-bottom":n.defaults.gravity,this.options.positionLeft=t.positionLeft||n.defaults.positionLeft,this.options.position=t.position||n.defaults.position,this.options.backgroundColor=t.backgroundColor||n.defaults.backgroundColor,this.options.avatar=t.avatar||n.defaults.avatar,this.options.className=t.className||n.defaults.className,this.options.stopOnFocus=void 0===t.stopOnFocus?n.defaults.stopOnFocus:t.stopOnFocus,this.options.onClick=t.onClick||n.defaults.onClick,this.options.offset=t.offset||n.defaults.offset,this.options.escapeMarkup=void 0!==t.escapeMarkup?t.escapeMarkup:n.defaults.escapeMarkup,this.options.ariaLive=t.ariaLive||n.defaults.ariaLive,this.options.style=t.style||n.defaults.style,t.backgroundColor&&(this.options.style.background=t.backgroundColor),this},buildToast:function(){if(!this.options)throw"Toastify is not initialized";var t=document.createElement("div");for(var n in t.className="toastify on "+this.options.className,this.options.position?t.className+=" toastify-"+this.options.position:!0===this.options.positionLeft?t.className+=" toastify-left":t.className+=" toastify-right",t.className+=" "+this.options.gravity,this.options.backgroundColor,this.options.style)t.style[n]=this.options.style[n];if(this.options.ariaLive&&t.setAttribute("aria-live",this.options.ariaLive),this.options.node&&this.options.node.nodeType===Node.ELEMENT_NODE)t.appendChild(this.options.node);else if(this.options.escapeMarkup?t.innerText=this.options.text:t.innerHTML=this.options.text,""!==this.options.avatar){var e=document.createElement("img");e.src=this.options.avatar,e.className="toastify-avatar","left"==this.options.position||!0===this.options.positionLeft?t.appendChild(e):t.insertAdjacentElement("afterbegin",e)}if(!0===this.options.close){var r=document.createElement("button");r.type="button",r.setAttribute("aria-label","Close"),r.className="toast-close",r.innerHTML="&#10006;",r.addEventListener("click",function(t){t.stopPropagation(),this.removeElement(this.toastElement),window.clearTimeout(this.toastElement.timeOutValue)}.bind(this));var s=window.innerWidth>0?window.innerWidth:screen.width;("left"==this.options.position||!0===this.options.positionLeft)&&s>360?t.insertAdjacentElement("afterbegin",r):t.appendChild(r)}if(this.options.stopOnFocus&&this.options.duration>0){var o=this;t.addEventListener("mouseover",(function(n){window.clearTimeout(t.timeOutValue)})),t.addEventListener("mouseleave",(function(){t.timeOutValue=window.setTimeout((function(){o.removeElement(t)}),o.options.duration)}))}if(void 0!==this.options.destination&&t.addEventListener("click",function(t){t.stopPropagation(),!0===this.options.newWindow?window.open(this.options.destination,"_blank"):window.location=this.options.destination}.bind(this)),"function"==typeof this.options.onClick&&void 0===this.options.destination&&t.addEventListener("click",function(t){t.stopPropagation(),this.options.onClick()}.bind(this)),"object"==typeof this.options.offset){var i=a("x",this.options),c=a("y",this.options),l="left"==this.options.position?i:"-"+i,d="toastify-top"==this.options.gravity?c:"-"+c;t.style.transform="translate("+l+","+d+")"}return t},showToast:function(){var t;if(this.toastElement=this.buildToast(),!(t="string"==typeof this.options.selector?document.getElementById(this.options.selector):this.options.selector instanceof HTMLElement||"undefined"!=typeof ShadowRoot&&this.options.selector instanceof ShadowRoot?this.options.selector:document.body))throw"Root element is not defined";var a=n.defaults.oldestFirst?t.firstChild:t.lastChild;return t.insertBefore(this.toastElement,a),n.reposition(),this.options.duration>0&&(this.toastElement.timeOutValue=window.setTimeout(function(){this.removeElement(this.toastElement)}.bind(this),this.options.duration)),this},hideToast:function(){this.toastElement.timeOutValue&&clearTimeout(this.toastElement.timeOutValue),this.removeElement(this.toastElement)},removeElement:function(t){t.className=t.className.replace(" on",""),window.setTimeout(function(){this.options.node&&this.options.node.parentNode&&this.options.node.parentNode.removeChild(this.options.node),t.parentNode&&t.parentNode.removeChild(t),this.options.callback.call(t),n.reposition()}.bind(this),400)}},n.reposition=function(){for(var t,n={top:15,bottom:15},a={top:15,bottom:15},r={top:15,bottom:15},s=document.getElementsByClassName("toastify"),o=0;o<s.length;o++){t=!0===e(s[o],"toastify-top")?"toastify-top":"toastify-bottom";var i=s[o].offsetHeight;t=t.substr(9,t.length-1),(window.innerWidth>0?window.innerWidth:screen.width)<=360?(s[o].style[t]=r[t]+"px",r[t]+=i+15):!0===e(s[o],"toastify-left")?(s[o].style[t]=n[t]+"px",n[t]+=i+15):(s[o].style[t]=a[t]+"px",a[t]+=i+15)}return this},n.lib.init.prototype=n.lib,n},t.exports?t.exports=a():n.Toastify=a()}},n={};function a(e){var r=n[e];if(void 0!==r)return r.exports;var s=n[e]={exports:{}};return t[e].call(s.exports,s,s.exports,a),s.exports}a.n=t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return a.d(n,{a:n}),n},a.d=(t,n)=>{for(var e in n)a.o(n,e)&&!a.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:n[e]})},a.o=(t,n)=>Object.prototype.hasOwnProperty.call(t,n),(()=>{"use strict";function t(t,n){for(var a=0;a<n.length;a++){var e=n[a];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function n(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?e(t,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,n){(null==n||n>t.length)&&(n=t.length);for(var a=0,e=new Array(n);a<n;a++)e[a]=t[a];return e}var r,s,o,i,c,l=(r=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],s=function(){function a(t){var e=t.targetModal,r=t.triggers,s=void 0===r?[]:r,o=t.onShow,i=void 0===o?function(){}:o,c=t.onClose,l=void 0===c?function(){}:c,d=t.openTrigger,u=void 0===d?"data-micromodal-trigger":d,p=t.closeTrigger,f=void 0===p?"data-micromodal-close":p,h=t.openClass,m=void 0===h?"is-open":h,v=t.disableScroll,g=void 0!==v&&v,y=t.disableFocus,b=void 0!==y&&y,w=t.awaitCloseAnimation,_=void 0!==w&&w,x=t.awaitOpenAnimation,k=void 0!==x&&x,j=t.debugMode,E=void 0!==j&&j;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,a),this.modal=document.getElementById(e),this.config={debugMode:E,disableScroll:g,openTrigger:u,closeTrigger:f,openClass:m,onShow:i,onClose:l,awaitCloseAnimation:_,awaitOpenAnimation:k,disableFocus:b},s.length>0&&this.registerTriggers.apply(this,n(s)),this.onClick=this.onClick.bind(this),this.onKeydown=this.onKeydown.bind(this)}var e,s;return e=a,(s=[{key:"registerTriggers",value:function(){for(var t=this,n=arguments.length,a=new Array(n),e=0;e<n;e++)a[e]=arguments[e];a.filter(Boolean).forEach((function(n){n.addEventListener("click",(function(n){return t.showModal(n)}))}))}},{key:"showModal",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.activeElement=document.activeElement,this.modal.setAttribute("aria-hidden","false"),this.modal.classList.add(this.config.openClass),this.scrollBehaviour("disable"),this.addEventListeners(),this.config.awaitOpenAnimation){this.modal.addEventListener("animationend",(function n(){t.modal.removeEventListener("animationend",n,!1),t.setFocusToFirstNode()}),!1)}else this.setFocusToFirstNode();this.config.onShow(this.modal,this.activeElement,n)}},{key:"closeModal",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=this.modal;if(this.modal.setAttribute("aria-hidden","true"),this.removeEventListeners(),this.scrollBehaviour("enable"),this.activeElement&&this.activeElement.focus&&this.activeElement.focus(),this.config.onClose(this.modal,this.activeElement,t),this.config.awaitCloseAnimation){var a=this.config.openClass;this.modal.addEventListener("animationend",(function t(){n.classList.remove(a),n.removeEventListener("animationend",t,!1)}),!1)}else n.classList.remove(this.config.openClass)}},{key:"closeModalById",value:function(t){this.modal=document.getElementById(t),this.modal&&this.closeModal()}},{key:"scrollBehaviour",value:function(t){if(this.config.disableScroll){var n=document.querySelector("body");switch(t){case"enable":Object.assign(n.style,{overflow:""});break;case"disable":Object.assign(n.style,{overflow:"hidden"})}}}},{key:"addEventListeners",value:function(){this.modal.addEventListener("touchstart",this.onClick),this.modal.addEventListener("click",this.onClick),document.addEventListener("keydown",this.onKeydown)}},{key:"removeEventListeners",value:function(){this.modal.removeEventListener("touchstart",this.onClick),this.modal.removeEventListener("click",this.onClick),document.removeEventListener("keydown",this.onKeydown)}},{key:"onClick",value:function(t){(t.target.hasAttribute(this.config.closeTrigger)||t.target.parentNode.hasAttribute(this.config.closeTrigger))&&(t.preventDefault(),t.stopPropagation(),this.closeModal(t))}},{key:"onKeydown",value:function(t){27===t.keyCode&&this.closeModal(t),9===t.keyCode&&this.retainFocus(t)}},{key:"getFocusableNodes",value:function(){var t=this.modal.querySelectorAll(r);return Array.apply(void 0,n(t))}},{key:"setFocusToFirstNode",value:function(){var t=this;if(!this.config.disableFocus){var n=this.getFocusableNodes();if(0!==n.length){var a=n.filter((function(n){return!n.hasAttribute(t.config.closeTrigger)}));a.length>0&&a[0].focus(),0===a.length&&n[0].focus()}}}},{key:"retainFocus",value:function(t){var n=this.getFocusableNodes();if(0!==n.length)if(n=n.filter((function(t){return null!==t.offsetParent})),this.modal.contains(document.activeElement)){var a=n.indexOf(document.activeElement);t.shiftKey&&0===a&&(n[n.length-1].focus(),t.preventDefault()),!t.shiftKey&&n.length>0&&a===n.length-1&&(n[0].focus(),t.preventDefault())}else n[0].focus()}}])&&t(e.prototype,s),a}(),o=null,i=function(t){if(!document.getElementById(t))return!1},c=function(t,n){if(function(t){t.length}(t),!n)return!0;for(var a in n)i(a);return!0},{init:function(t){var a=Object.assign({},{openTrigger:"data-micromodal-trigger"},t),e=n(document.querySelectorAll("[".concat(a.openTrigger,"]"))),r=function(t,n){var a=[];return t.forEach((function(t){var e=t.attributes[n].value;void 0===a[e]&&(a[e]=[]),a[e].push(t)})),a}(e,a.openTrigger);if(!0!==a.debugMode||!1!==c(e,r))for(var i in r){var l=r[i];a.targetModal=i,a.triggers=n(l),o=new s(a)}},show:function(t,n){var a=n||{};a.targetModal=t,!0===a.debugMode&&!1===i(t)||(o&&o.removeEventListeners(),(o=new s(a)).showModal())},close:function(t){t?o.closeModalById(t):o.closeModal()}});"undefined"!=typeof window&&(window.MicroModal=l);const d=l;var u=a(736),p=a.n(u);function f(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error";null!=t&&p()({text:t,duration:5e3,newWindow:!0,close:!0,style:{background:"error"===n?"#cc3e3e":"success"===n?"#25ae25":"#373636"},gravity:"bottom",position:"left",stopOnFocus:!0}).showToast()}const h=jQuery;var m=a.n(h);function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function g(t,n){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);n&&(e=e.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),a.push.apply(a,e)}return a}function y(t,n,a){return(n=w(n))in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t}function b(t,n){for(var a=0;a<n.length;a++){var e=n[a];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,w(e.key),e)}}function w(t){var n=function(t,n){if("object"!=v(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var e=a.call(t,n||"default");if("object"!=v(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==v(n)?n:n+""}var _=function(){return function(t,n,a){return n&&b(t.prototype,n),a&&b(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(n){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.config=function(t){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?g(Object(a),!0).forEach((function(n){y(t,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(a,n))}))}return t}({modalId:n.modalId,buttonId:n.buttonId,title:n.title,action:n.action,changeStatusAction:n.changeStatusAction,changeStatusText:n.changeStatusText,warningText:n.warningText},n),this.init()}),[{key:"init",value:function(){var t=this;m()(document).ready((function(){m()("#".concat(t.config.buttonId)).on("click",(function(n){n.preventDefault(),t.showModal()})),t.config.changeStatusAction&&m()("#".concat(t.config.modalId,"-change-status")).on("click",(function(n){n.preventDefault(),t.changeStatus()}))}))}},{key:"showModal",value:function(){m()("#".concat(this.config.modalId,"-loading")).show(),m()("#".concat(this.config.modalId,"-content")).hide(),MicroModal.show(this.config.modalId),this.fetchData()}},{key:"fetchData",value:function(){var t=this;m().ajax({url:awca_ajax_object.ajax_url,type:"POST",data:{action:this.config.action,nonce:awca_ajax_object.nonce},success:function(n){n.success?t.handleSuccess(n.data):t.handleError(n.data)},error:function(n,a,e){t.handleError("خطا در ارتباط با سرور")}})}},{key:"handleSuccess",value:function(t){void 0!==t.count&&m()("#".concat(this.config.modalId,"-count")).text(t.count),void 0!==t.total_products&&m()("#".concat(this.config.modalId,"-total")).text(t.total_products),m()("#".concat(this.config.modalId,"-list")).html(t.html),this.config.changeStatusAction&&(t.count>0?m()("#".concat(this.config.modalId,"-change-status")).show():m()("#".concat(this.config.modalId,"-change-status")).hide()),m()("#".concat(this.config.modalId,"-loading")).hide(),m()("#".concat(this.config.modalId,"-content")).show()}},{key:"handleError",value:function(t){m()("#".concat(this.config.modalId,"-loading")).hide(),m()("#".concat(this.config.modalId,"-content")).html('<p style="text-align: center; color: #dc3232; padding: 20px;">خطا در دریافت اطلاعات: '.concat(t,"</p>")).show()}},{key:"changeStatus",value:function(){var t=this;if(confirm(this.config.warningText||"آیا مطمئن هستید؟")){var n=m()("#".concat(this.config.modalId,"-change-status")),a=n.html(),e="anar_manual_fix_products"===this.config.changeStatusAction?'<span class="dashicons dashicons-admin-tools"></span> در حال تعمیر محصولات...':'<span class="dashicons dashicons-update"></span> در حال تغییر وضعیت...';n.prop("disabled",!0).html(e),m().ajax({url:awca_ajax_object.ajax_url,type:"POST",data:{action:this.config.changeStatusAction,nonce:awca_ajax_object.nonce},success:function(n){n.success?(f(n.data.message,"success"),t.fetchData()):f(n.data.message||"خطا در اجرای عملیات","error")},error:function(t,n,a){f("خطا در ارتباط با سرور","error")},complete:function(){n.prop("disabled",!1).html(a)}})}}}])}();function x(t){var n=document.createElement("div");return n.textContent=t,n.innerHTML}function k(t){return{version:"نسخه",multisite:"چندسایتی",language:"زبان",timezone:"منطقه زمانی",memory_limit:"حد حافظه",max_execution_time:"حد زمان اجرا",currency:"واحد پول",products_count:"تعداد محصولات",orders_count:"تعداد سفارشات",php_version:"نسخه PHP",mysql_version:"نسخه MySQL",server_software:"نرم‌افزار سرور",upload_max_filesize:"حد آپلود فایل",post_max_size:"حد اندازه پست",plugin_version:"نسخه افزونه",anar_products:"محصولات انار",last_sync:"آخرین همگام‌سازی",total:"کل",with_prices:"با قیمت",zero_profit:"سود صفر",deprecated:"منسوخ شده",recently_synced:"همگام‌سازی شده",not_synced_recently:"همگام‌سازی نشده",never_synced:"هرگز همگام‌سازی نشده",need_fix:"نیازمند رفع مشکل",sync_error:"خطای همگام‌سازی",created_today:"ایجاد شده امروز",updated_today:"به‌روزرسانی شده امروز"}[t]||t}function j(t){var n=parseFloat(t);return isNaN(n)?"":n>=8?"anar-benchmark-item-score--excellent":n>=6?"anar-benchmark-item-score--good":n>=4?"anar-benchmark-item-score--average":n>=2?"anar-benchmark-item-score--fair":"anar-benchmark-item-score--poor"}function E(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var e,r,s,o,i=[],c=!0,l=!1;try{if(s=(a=a.call(t)).next,0===n){if(Object(a)!==a)return;c=!1}else for(;!(c=(e=s.call(a)).done)&&(i.push(e.value),i.length!==n);c=!0);}catch(t){l=!0,r=t}finally{try{if(!c&&null!=a.return&&(o=a.return(),Object(o)!==o))return}finally{if(l)throw r}}return i}}(t,n)||function(t,n){if(t){if("string"==typeof t)return L(t,n);var a={}.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?L(t,n):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(t,n){(null==n||n>t.length)&&(n=t.length);for(var a=0,e=Array(n);a<n;a++)e[a]=t[a];return e}function S(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var e,r,s,o,i=[],c=!0,l=!1;try{if(s=(a=a.call(t)).next,0===n){if(Object(a)!==a)return;c=!1}else for(;!(c=(e=s.call(a)).done)&&(i.push(e.value),i.length!==n);c=!0);}catch(t){l=!0,r=t}finally{try{if(!c&&null!=a.return&&(o=a.return(),Object(o)!==o))return}finally{if(l)throw r}}return i}}(t,n)||function(t,n){if(t){if("string"==typeof t)return O(t,n);var a={}.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?O(t,n):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(t,n){(null==n||n>t.length)&&(n=t.length);for(var a=0,e=Array(n);a<n;a++)e[a]=t[a];return e}function T(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var e,r,s,o,i=[],c=!0,l=!1;try{if(s=(a=a.call(t)).next,0===n){if(Object(a)!==a)return;c=!1}else for(;!(c=(e=s.call(a)).done)&&(i.push(e.value),i.length!==n);c=!0);}catch(t){l=!0,r=t}finally{try{if(!c&&null!=a.return&&(o=a.return(),Object(o)!==o))return}finally{if(l)throw r}}return i}}(t,n)||function(t,n){if(t){if("string"==typeof t)return A(t,n);var a={}.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?A(t,n):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(t,n){(null==n||n>t.length)&&(n=t.length);for(var a=0,e=Array(n);a<n;a++)e[a]=t[a];return e}function I(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var e,r,s,o,i=[],c=!0,l=!1;try{if(s=(a=a.call(t)).next,0===n){if(Object(a)!==a)return;c=!1}else for(;!(c=(e=s.call(a)).done)&&(i.push(e.value),i.length!==n);c=!0);}catch(t){l=!0,r=t}finally{try{if(!c&&null!=a.return&&(o=a.return(),Object(o)!==o))return}finally{if(l)throw r}}return i}}(t,n)||function(t,n){if(t){if("string"==typeof t)return C(t,n);var a={}.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?C(t,n):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(t,n){(null==n||n>t.length)&&(n=t.length);for(var a=0,e=Array(n);a<n;a++)e[a]=t[a];return e}function F(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var e,r,s,o,i=[],c=!0,l=!1;try{if(s=(a=a.call(t)).next,0===n){if(Object(a)!==a)return;c=!1}else for(;!(c=(e=s.call(a)).done)&&(i.push(e.value),i.length!==n);c=!0);}catch(t){l=!0,r=t}finally{try{if(!c&&null!=a.return&&(o=a.return(),Object(o)!==o))return}finally{if(l)throw r}}return i}}(t,n)||function(t,n){if(t){if("string"==typeof t)return P(t,n);var a={}.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?P(t,n):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(t,n){(null==n||n>t.length)&&(n=t.length);for(var a=0,e=Array(n);a<n;a++)e[a]=t[a];return e}function N(t){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},N(t)}function M(t,n){for(var a=0;a<n.length;a++){var e=n[a];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,D(e.key),e)}}function D(t){var n=function(t,n){if("object"!=N(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var e=a.call(t,n||"default");if("object"!=N(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==N(n)?n:n+""}var B=function(){return function(t,n,a){return n&&M(t.prototype,n),a&&M(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.widgets={},this.init()}),[{key:"init",value:function(){var t=this;m()(document).ready((function(){t.bindEvents()}))}},{key:"bindEvents",value:function(){var t=this;m()(document).on("click",".anar-widget-actions button[data-action]",(function(n){n.preventDefault();var a=m()(n.currentTarget),e=a.data("action"),r=a.data("widget");t.loadWidgetData(r,e,a)}))}},{key:"loadWidgetData",value:function(t,n,a){var e=this,r=m()("#".concat(t)),s=r.find(".anar-widget-loading"),o=r.find(".anar-widget-results"),i=r.find(".anar-widget-error"),c=a.html();s.show(),o.hide(),i.hide(),a.prop("disabled",!0).html('<span class="spinner is-active"></span> در حال بارگذاری...'),m().ajax({url:awca_ajax_object.ajax_url,type:"POST",data:{action:n,nonce:awca_ajax_object.nonce},success:function(t){t.success?(e.displayWidgetData(r,t.data),f("گزارش با موفقیت دریافت شد","success")):(e.displayWidgetError(r,t.data.message||"خطا در دریافت گزارش"),f(t.data.message||"خطا در دریافت گزارش","error"))},error:function(t,n,a){e.displayWidgetError(r,"خطا در ارتباط با سرور: ".concat(t.status," - ").concat(t.statusText)),f("خطا در ارتباط با سرور","error")},complete:function(){s.hide(),a.prop("disabled",!1).html(c)}})}},{key:"displayWidgetData",value:function(t,n){var a=t.find(".anar-widget-results"),e=this.generateWidgetHTML(n);a.html(e).show()}},{key:"displayWidgetError",value:function(t,n){t.find(".anar-widget-error").html('<div class="notice notice-error"><p>'.concat(n,"</p></div>")).show()}},{key:"generateWidgetHTML",value:function(t){var n="";return t.wp_info&&(n+=function(t){var n='<div class="anar-widget-section">';return n+="<h4>اطلاعات وردپرس</h4>",n+='<div class="anar-info-grid">',Object.entries(t.wp_info).forEach((function(t){var a=E(t,2),e=a[0],r=a[1];n+='<div class="anar-info-item">\n            <span class="anar-info-label">'.concat(k(e),':</span>\n            <span class="anar-info-value">').concat(r,"</span>\n        </div>")})),n+="</div></div>",t.wc_info&&Object.keys(t.wc_info).length>0&&(n+='<div class="anar-widget-section">',n+="<h4>اطلاعات ووکامرس</h4>",n+='<div class="anar-info-grid">',Object.entries(t.wc_info).forEach((function(t){var a=E(t,2),e=a[0],r=a[1];n+='<div class="anar-info-item">\n                <span class="anar-info-label">'.concat(k(e),':</span>\n                <span class="anar-info-value">').concat(r,"</span>\n            </div>")})),n+="</div></div>"),t.anar_info&&(n+='<div class="anar-widget-section">',n+="<h4>اطلاعات انار</h4>",n+='<div class="anar-info-grid">',Object.entries(t.anar_info).forEach((function(t){var a=E(t,2),e=a[0],r=a[1];n+='<div class="anar-info-item">\n                <span class="anar-info-label">'.concat(k(e),':</span>\n                <span class="anar-info-value">').concat(r,"</span>\n            </div>")})),n+="</div></div>"),n}(t)),t.tables&&(n+=function(t){var n="";if(t.database_info&&(n+='<div class="anar-widget-section">',n+="<h4>اطلاعات پایگاه داده</h4>",n+='<div class="anar-database-info">',n+='<div class="anar-info-item"><span class="anar-info-label">نسخه:</span> <span class="anar-info-value">'.concat(t.database_info.version||"نامشخص","</span></div>"),n+='<div class="anar-info-item"><span class="anar-info-label">نام پایگاه داده:</span> <span class="anar-info-value">'.concat(t.database_info.database_name||"نامشخص","</span></div>"),n+='<div class="anar-info-item"><span class="anar-info-label">اندازه کل:</span> <span class="anar-info-value">'.concat(t.database_info.database_size||"0 B","</span></div>"),n+='<div class="anar-info-item"><span class="anar-info-label">Charset:</span> <span class="anar-info-value">'.concat(t.database_info.charset||"utf8mb4","</span></div>"),n+="</div></div>"),t.innodb_status){n+='<div class="anar-widget-section">',n+="<h4>وضعیت InnoDB</h4>";var a=t.innodb_status.can_create_indexes?"status-good":"status-error";n+='<div class="anar-innodb-overall '.concat(a,'">'),n+='<span class="anar-status-badge">'.concat(t.innodb_status.can_create_indexes?"✓ می‌توان ایندکس ایجاد کرد":"✗ نمی‌توان ایندکس ایجاد کرد","</span>"),n+="</div>",n+='<div class="anar-innodb-tables">',Object.entries(t.innodb_status.tables).forEach((function(t){var a=S(t,2),e=(a[0],a[1]),r="good"===e.status?"status-good":"status-error";n+='<div class="anar-innodb-table-item">\n                <div class="anar-table-name">'.concat(e.name,'</div>\n                <div class="anar-table-details">\n                    <span>engine: ').concat(e.engine,'</span>\n                    <span class="').concat(r,'">').concat(e.is_innodb?"✓ InnoDB":"✗ "+e.engine,"</span>\n                </div>\n            </div>")})),n+="</div></div>"}if(t.tables&&(n+='<div class="anar-widget-section">',n+="<h4>وضعیت جداول</h4>",n+='<div class="anar-table-health">',Object.entries(t.tables).forEach((function(t){var a=S(t,2),e=(a[0],a[1]),r="good"===e.status?"status-good":"status-warning",s=e.is_innodb?"status-good":"status-error";n+='<div class="anar-table-item">\n                <div class="anar-table-header">\n                    <span class="anar-table-name">'.concat(e.name,'</span>\n                    <span class="').concat(r,'">').concat("good"===e.status?"✓":"⚠",'</span>\n                </div>\n                <div class="anar-table-details">\n                    <div class="anar-table-detail-row">\n                        <span>ردیف‌ها: <strong>').concat(e.rows.toLocaleString(),"</strong></span>\n                        <span>اندازه کل: <strong>").concat(e.total_size,'</strong></span>\n                    </div>\n                    <div class="anar-table-detail-row">\n                        <span>داده: ').concat(e.data_length,"</span>\n                        <span>ایندکس: ").concat(e.index_length,'</span>\n                    </div>\n                    <div class="anar-table-detail-row">\n                        <span>engine: <strong>').concat(e.engine,'</strong></span>\n                        <span class="').concat(s,'">').concat(e.is_innodb?"✓ InnoDB":"✗ "+e.engine,"</span>\n                    </div>\n                </div>\n            </div>")})),n+="</div></div>"),t.indexes&&!t.indexes.error){n+='<div class="anar-widget-section">',n+="<h4>وضعیت ایندکس‌های همگام‌سازی</h4>";var e=t.indexes.all_exist?"status-good":"status-warning";n+='<div class="anar-indexes-summary '.concat(e,'">'),n+='<span class="anar-status-badge">'.concat(t.indexes.existing_count,"/").concat(t.indexes.total_required," ایندکس موجود</span>"),t.indexes.all_exist||(n+='<span class="anar-missing-count">'.concat(t.indexes.missing_count," ایندکس مفقود</span>")),n+="</div>",n+='<div class="anar-indexes-health">',t.indexes.indexes&&Object.entries(t.indexes.indexes).forEach((function(t){var a=S(t,2),e=(a[0],a[1]),r="good"===e.status?"status-good":"status-error";n+='<div class="anar-index-item">\n                    <div class="anar-index-info">\n                        <span class="anar-index-name">'.concat(e.display_name||e.name,'</span>\n                        <span class="anar-index-key">').concat(e.name,'</span>\n                    </div>\n                    <span class="').concat(r,'">').concat(e.exists?"✓ موجود":"✗ موجود نیست","</span>\n                </div>")})),t.indexes.missing_indexes&&t.indexes.missing_indexes.length>0&&(n+='<div class="anar-missing-indexes">',n+="<strong>ایندکس‌های مفقود:</strong> ",n+=t.indexes.missing_indexes.join(", "),n+="</div>"),n+="</div></div>"}else t.indexes&&t.indexes.error&&(n+='<div class="anar-widget-section">',n+='<div class="anar-error-message">',n+="<p>خطا در بررسی ایندکس‌ها: ".concat(t.indexes.message||"خطای نامشخص","</p>"),n+="</div></div>");return t.performance&&(n+='<div class="anar-widget-section">',n+="<h4>معیارهای عملکرد</h4>",n+='<div class="anar-performance-metrics">',Object.entries(t.performance).forEach((function(t){var a=S(t,2),e=a[0],r=a[1],s="",o="good"===r.status?"status-good":"error"===r.status?"status-error":"warning"===r.status?"status-warning":"status-info";"mysql_version"===e?s='<div class="anar-metric-item">\n                    <span class="anar-metric-label">نسخه MySQL:</span>\n                    <span class="anar-metric-value">'.concat(r.value,"</span>\n                </div>"):"slow_query_log"===e?s='<div class="anar-metric-item">\n                    <span class="anar-metric-label">Slow Query Log:</span>\n                    <span class="'.concat(o,'">').concat(r.enabled?"✓ فعال":"✗ غیرفعال","</span>\n                </div>"):"query_cache"===e?s='<div class="anar-metric-item">\n                    <span class="anar-metric-label">Query Cache:</span>\n                    <span class="anar-metric-value">'.concat(r.size,'</span>\n                    <span class="').concat(o,'">').concat(r.enabled?"✓":"✗","</span>\n                </div>"):"innodb_buffer_pool"===e?s='<div class="anar-metric-item">\n                    <span class="anar-metric-label">InnoDB Buffer Pool:</span>\n                    <span class="anar-metric-value">'.concat(r.size,'</span>\n                    <span class="').concat(o,'">').concat(r.size_bytes>134217728?"✓":"⚠","</span>\n                </div>"):"max_connections"===e?s='<div class="anar-metric-item">\n                    <span class="anar-metric-label">حداکثر اتصالات:</span>\n                    <span class="anar-metric-value">'.concat(r.value,'</span>\n                    <span class="').concat(o,'">').concat(r.value>=100?"✓":"⚠","</span>\n                </div>"):"current_connections"===e&&(s='<div class="anar-metric-item">\n                    <span class="anar-metric-label">اتصالات فعلی:</span>\n                    <span class="anar-metric-value">'.concat(r.value,"</span>\n                </div>")),s&&(n+=s)})),n+="</div></div>"),t.recommendations&&t.recommendations.length>0&&(n+='<div class="anar-widget-section">',n+="<h4>توصیه‌ها</h4>",n+='<div class="anar-recommendations">',t.recommendations.forEach((function(t){var a="error"===t.type?"anar-rec-error":"warning"===t.type?"anar-rec-warning":"anar-rec-info";n+='<div class="anar-recommendation-item '.concat(a,'">'),n+='<span class="anar-rec-icon">'.concat("error"===t.type?"✗":"warning"===t.type?"⚠":"ℹ","</span>"),n+='<span class="anar-rec-message">'.concat(t.message,"</span>"),n+="</div>"})),n+="</div></div>"),t.timestamp&&(n+='<div class="anar-widget-footer">',n+='<span class="anar-timestamp">آخرین بررسی: '.concat(t.timestamp,"</span>"),n+="</div>"),n||"<p>هیچ داده‌ای یافت نشد.</p>"}(t)),t.total_products&&(n+=function(t){var n='<div class="anar-widget-section">';return n+="<h4>آمار کلی محصولات</h4>",n+='<div class="anar-stats-grid">',Object.entries(t.total_products).forEach((function(t){var a=T(t,2),e=a[0],r=a[1];n+='<div class="anar-stat-item">\n            <span class="anar-stat-label">'.concat(function(t){return{published:"منتشر شده",draft:"پیش‌نویس",pending:"در انتظار بررسی",private:"خصوصی",trash:"سطل زباله"}[t]||t}(e),':</span>\n            <span class="anar-stat-value">').concat(r,"</span>\n        </div>")})),n+="</div></div>",t.anar_products&&(n+='<div class="anar-widget-section">',n+="<h4>محصولات انار</h4>",n+='<div class="anar-stats-grid">',Object.entries(t.anar_products).forEach((function(t){var a=T(t,2),e=a[0],r=a[1];n+='<div class="anar-stat-item">\n                <span class="anar-stat-label">'.concat(k(e),':</span>\n                <span class="anar-stat-value">').concat(r,"</span>\n            </div>")})),n+="</div></div>"),t.sync_status&&(n+='<div class="anar-widget-section">',n+="<h4>وضعیت همگام‌سازی</h4>",n+='<div class="anar-stats-grid">',Object.entries(t.sync_status).forEach((function(t){var a=T(t,2),e=a[0],r=a[1];n+='<div class="anar-stat-item">\n                <span class="anar-stat-label">'.concat(k(e),':</span>\n                <span class="anar-stat-value">').concat(r,"</span>\n            </div>")})),n+="</div></div>"),n}(t)),(t.anar_logs||t.log_files)&&(n+=function(t){var n='<div class="anar-widget-section">';return t.log_files&&t.log_files.length>0?(n+="<h4>فایل‌های لاگ</h4>",n+='<div class="anar-log-files-list">',t.log_files.forEach((function(t){n+='<div class="anar-log-file-item">\n                <div class="anar-log-file-info">\n                    <div class="anar-log-file-name">'.concat(x(t.filename),'</div>\n                    <div class="anar-log-file-meta">\n                        <span class="anar-log-file-size">').concat(t.size,'</span>\n                        <span class="anar-log-file-date">').concat(t.modified,'</span>\n                    </div>\n                </div>\n                <div class="anar-log-file-actions">\n                    <button class="button button-small anar-preview-log" \n                            data-file-id="').concat(x(t.id),'" \n                            data-filename="').concat(x(t.filename),'"\n                            title="پیش‌نمایش">\n                        <span class="dashicons dashicons-visibility"></span>\n                        پیش‌نمایش\n                    </button>\n                    <a href="').concat(x(t.download_url),'" \n                       class="button button-small" \n                       download\n                       title="دانلود">\n                        <span class="dashicons dashicons-download"></span>\n                        دانلود\n                    </a>\n                </div>\n            </div>')})),n+="</div>"):t.log_files&&0===t.log_files.length&&(n+='<div class="anar-widget-section">',n+="<h4>فایل‌های لاگ</h4>",n+="<p>هیچ فایل لاگی یافت نشد.</p>",n+="</div>"),n+="</div>"}(t)),void 0!==t.overall_score&&(n+=function(t){var n,a,e,r,s='<div class="anar-widget-section">',o=Math.min(10,Math.max(0,t.overall_score)),i=o/10*100;return s+='<h4>امتیاز کلی: <strong class="anar-benchmark-score-label '+j(o)+'">'+o.toFixed(2)+" / 10</strong></h4>",s+='<div class="anar-benchmark-gradient-line">',s+='<div class="anar-benchmark-gradient-bar">',s+='<div class="anar-benchmark-score-marker" style="left: '+i.toFixed(2)+'%;"></div>',s+="</div>",s+='<div class="anar-benchmark-scale">',s+="<span>10</span>",s+="<span>5</span>",s+="<span>0</span>",s+="</div>",s+="</div>",s+='<div class="anar-benchmark-details">',t.disk_read&&t.disk_read.success?(s+='<div class="anar-benchmark-item">',s+='<div class="anar-benchmark-item-header">',s+='<span class="anar-benchmark-item-title">سرعت خواندن دیسک</span>',s+='<span class="anar-benchmark-item-score '+j(t.disk_read.score)+'">امتیاز: '+t.disk_read.score.toFixed(2)+"</span>",s+="</div>",s+='<div class="anar-benchmark-item-details">',s+="<span>میانگین سرعت: <strong>"+t.disk_read.speed_mbps+" MB/s</strong></span>",void 0!==t.disk_read.peak_speed_mbps&&(s+="<span>بیشترین سرعت: "+t.disk_read.peak_speed_mbps+" MB/s</span>"),s+="<span>زمان میانگین: "+(1e3*t.disk_read.duration).toFixed(2)+" ms</span>",s+="<span>اندازه فایل: "+t.disk_read.size_mb+" MB</span>",void 0!==t.disk_read.samples&&(s+="<span>نمونه‌ها: "+t.disk_read.samples+"</span>"),s+="</div>",s+="</div>"):(s+='<div class="anar-benchmark-item anar-benchmark-item-error">',s+='<span class="anar-benchmark-item-title">سرعت خواندن دیسک</span>',s+='<span class="anar-benchmark-error">خطا: '+((null===(n=t.disk_read)||void 0===n?void 0:n.error)||"نامشخص")+"</span>",s+="</div>"),t.disk_write&&t.disk_write.success?(s+='<div class="anar-benchmark-item">',s+='<div class="anar-benchmark-item-header">',s+='<span class="anar-benchmark-item-title">سرعت نوشتن دیسک</span>',s+='<span class="anar-benchmark-item-score '+j(t.disk_write.score)+'">امتیاز: '+t.disk_write.score.toFixed(2)+"</span>",s+="</div>",s+='<div class="anar-benchmark-item-details">',s+="<span>میانگین سرعت: <strong>"+t.disk_write.speed_mbps+" MB/s</strong></span>",void 0!==t.disk_write.peak_speed_mbps&&(s+="<span>بیشترین سرعت: "+t.disk_write.peak_speed_mbps+" MB/s</span>"),s+="<span>زمان میانگین: "+(1e3*t.disk_write.duration).toFixed(2)+" ms</span>",s+="<span>اندازه فایل: "+t.disk_write.size_mb+" MB</span>",void 0!==t.disk_write.samples&&(s+="<span>نمونه‌ها: "+t.disk_write.samples+"</span>"),s+="</div>",s+="</div>"):(s+='<div class="anar-benchmark-item anar-benchmark-item-error">',s+='<span class="anar-benchmark-item-title">سرعت نوشتن دیسک</span>',s+='<span class="anar-benchmark-error">خطا: '+((null===(a=t.disk_write)||void 0===a?void 0:a.error)||"نامشخص")+"</span>",s+="</div>"),t.network&&t.network.success?(s+='<div class="anar-benchmark-item">',s+='<div class="anar-benchmark-item-header">',s+='<span class="anar-benchmark-item-title">سرعت شبکه</span>',s+='<span class="anar-benchmark-item-score '+j(t.network.score)+'">امتیاز: '+t.network.score.toFixed(2)+"</span>",s+="</div>",s+='<div class="anar-benchmark-item-details">',s+="<span>میانگین سرعت: <strong>"+t.network.speed_mbps+" MB/s</strong></span>",void 0!==t.network.peak_speed_mbps&&(s+="<span>بیشترین سرعت: "+t.network.peak_speed_mbps+" MB/s</span>"),void 0!==t.network.min_speed_mbps&&(s+="<span>کمترین سرعت: "+t.network.min_speed_mbps+" MB/s</span>"),s+="<span>زمان میانگین: "+(1e3*t.network.duration).toFixed(2)+" ms</span>",s+="<span>اندازه داده: "+t.network.size_kb+" KB</span>",void 0!==t.network.urls_tested&&(s+="<span>تعداد آدرس‌ها: "+t.network.urls_tested+"</span>"),void 0!==t.network.samples&&(s+="<span>کل نمونه‌ها: "+t.network.samples+"</span>"),s+="</div>",t.network.url_results&&t.network.url_results.length>0&&(s+='<div class="anar-benchmark-url-results">',s+="<strong>نتایج هر آدرس:</strong>",s+="<ul>",t.network.url_results.forEach((function(t){var n=t.url.replace(/^https?:\/\//,"").split("/")[0];s+="<li>",s+='<span class="anar-benchmark-url-name">'+x(n)+":</span> ",s+='<span class="anar-benchmark-url-speed">'+t.avg_speed_mbps.toFixed(2)+" MB/s</span> ",s+='<span class="anar-benchmark-url-samples">('+t.samples+" نمونه)</span>",s+="</li>"})),s+="</ul>",s+="</div>"),s+="</div>"):(s+='<div class="anar-benchmark-item anar-benchmark-item-error">',s+='<span class="anar-benchmark-item-title">سرعت شبکه</span>',s+='<span class="anar-benchmark-error">خطا: '+((null===(e=t.network)||void 0===e?void 0:e.error)||"نامشخص")+"</span>",s+="</div>"),t.database&&t.database.success?(s+='<div class="anar-benchmark-item">',s+='<div class="anar-benchmark-item-header">',s+='<span class="anar-benchmark-item-title">عملکرد پایگاه داده</span>',s+='<span class="anar-benchmark-item-score '+j(t.database.score)+'">امتیاز: '+t.database.score.toFixed(2)+"</span>",s+="</div>",s+='<div class="anar-benchmark-item-details">',s+="<span>خواندن ساده: <strong>"+t.database.simple_read_ms+" ms</strong> (امتیاز: "+t.database.read_score.toFixed(2)+")</span>",s+="<span>نوشتن: <strong>"+t.database.write_ms+" ms</strong> (امتیاز: "+t.database.write_score.toFixed(2)+")</span>",s+="<span>کوئری پیچیده: <strong>"+t.database.complex_query_ms+" ms</strong> (امتیاز: "+t.database.complex_score.toFixed(2)+")</span>",t.database.samples&&(s+="<span>تعداد نمونه: "+(t.database.samples.simple_read+t.database.samples.write+t.database.samples.complex_query)+"</span>"),s+="</div>",s+="</div>"):(s+='<div class="anar-benchmark-item anar-benchmark-item-error">',s+='<span class="anar-benchmark-item-title">عملکرد پایگاه داده</span>',s+='<span class="anar-benchmark-error">خطا: '+((null===(r=t.database)||void 0===r?void 0:r.error)||"نامشخص")+"</span>",s+="</div>"),s+="</div>",t.timestamp&&(s+='<div class="anar-benchmark-timestamp">',s+="<small>زمان تست: "+x(t.timestamp)+"</small>",s+="</div>"),s+="</div>"}(t)),void 0===t.endpoints&&void 0===t.health_score||(n+=function(t){var n='<div class="anar-widget-section">',a=t.health_score||0;return n+='<h4>امتیاز کلی: <strong class="anar-benchmark-score-label '+j(a)+'">'+a.toFixed(2)+" / 10</strong></h4>",n+='<div class="anar-api-health-summary">',n+='<div class="anar-api-health-stat">',n+='<span class="anar-api-health-stat-label">کل تست‌ها:</span>',n+='<span class="anar-api-health-stat-value">'+(t.total_tested||0)+"</span>",n+="</div>",n+='<div class="anar-api-health-stat anar-api-health-stat-success">',n+='<span class="anar-api-health-stat-label">موفق:</span>',n+='<span class="anar-api-health-stat-value">'+(t.total_success||0)+"</span>",n+="</div>",n+='<div class="anar-api-health-stat anar-api-health-stat-error">',n+='<span class="anar-api-health-stat-label">ناموفق:</span>',n+='<span class="anar-api-health-stat-value">'+(t.total_failed||0)+"</span>",n+="</div>",n+="</div>",t.api_domain&&(n+='<div class="anar-api-domain">',n+="<strong>دامنه API:</strong> <code>"+x(t.api_domain)+"</code>",n+="</div>"),t.endpoints&&Object.keys(t.endpoints).length>0&&(n+='<div class="anar-api-endpoints">',n+="<h4>نتایج هر Endpoint:</h4>",n+='<div class="anar-api-endpoints-list">',Object.entries(t.endpoints).forEach((function(t){var a=I(t,2),e=a[0],r=a[1],s=r.success?"anar-api-endpoint-success":"anar-api-endpoint-error",o=r.success?"✓":"✗",i=r.success?"موفق":"ناموفق";n+='<div class="anar-api-endpoint-item '+s+'">',n+='<div class="anar-api-endpoint-header">',n+='<span class="anar-api-endpoint-name">'+x(e)+"</span>",n+='<span class="anar-api-endpoint-status">'+o+" "+i+"</span>",n+="</div>",n+='<div class="anar-api-endpoint-details">',r.url&&(n+='<div class="anar-api-endpoint-url">',n+="<strong>URL:</strong> <code>"+x(r.url)+"</code>",n+="</div>"),r.status_code&&(n+='<span class="anar-api-endpoint-meta">',n+="<strong>Status Code:</strong> "+r.status_code,n+="</span>"),void 0!==r.duration_ms&&(n+='<span class="anar-api-endpoint-meta">',n+="<strong>زمان پاسخ:</strong> "+r.duration_ms.toFixed(2)+" ms",n+="</span>"),r.body_size_formatted&&(n+='<span class="anar-api-endpoint-meta">',n+="<strong>اندازه پاسخ:</strong> "+r.body_size_formatted,n+="</span>"),r.status_message&&(n+='<span class="anar-api-endpoint-meta">',n+="<strong>پیام:</strong> "+x(r.status_message),n+="</span>"),r.error&&(n+='<div class="anar-api-endpoint-error-message">',n+="<strong>خطا:</strong> "+x(r.error),r.error_code&&(n+=' <span class="anar-api-error-code">('+x(r.error_code)+")</span>"),n+="</div>"),n+="</div>",n+="</div>"})),n+="</div>",n+="</div>"),t.custom_urls&&Object.keys(t.custom_urls).length>0&&(n+='<div class="anar-api-custom-urls">',n+="<h4>تست اتصال به URL های خارجی:</h4>",n+='<div class="anar-api-endpoints-list">',Object.entries(t.custom_urls).forEach((function(t){var a=I(t,2),e=a[0],r=a[1],s=r.success?"anar-api-endpoint-success":"anar-api-endpoint-error",o=r.success?"✓":"✗",i=r.success?"موفق":"ناموفق";n+='<div class="anar-api-endpoint-item '+s+'">',n+='<div class="anar-api-endpoint-header">',n+='<span class="anar-api-endpoint-name">'+x(r.name||e)+"</span>",n+='<span class="anar-api-endpoint-status">'+o+" "+i+"</span>",n+="</div>",n+='<div class="anar-api-endpoint-details">',r.url&&(n+='<div class="anar-api-endpoint-url">',n+="<strong>URL:</strong> <code>"+x(r.url)+"</code>",n+="</div>"),r.status_code&&(n+='<span class="anar-api-endpoint-meta">',n+="<strong>Status Code:</strong> "+r.status_code,n+="</span>"),void 0!==r.duration_ms&&(n+='<span class="anar-api-endpoint-meta">',n+="<strong>زمان پاسخ:</strong> "+r.duration_ms.toFixed(2)+" ms",n+="</span>"),r.body_size_formatted&&(n+='<span class="anar-api-endpoint-meta">',n+="<strong>اندازه پاسخ:</strong> "+r.body_size_formatted,n+="</span>"),r.status_message&&(n+='<span class="anar-api-endpoint-meta">',n+="<strong>پیام:</strong> "+x(r.status_message),n+="</span>"),r.error&&(n+='<div class="anar-api-endpoint-error-message">',n+="<strong>خطا:</strong> "+x(r.error),r.error_code&&(n+=' <span class="anar-api-error-code">('+x(r.error_code)+")</span>"),n+="</div>"),n+="</div>",n+="</div>"})),n+="</div>",n+="</div>"),n+="</div>",t.timestamp&&(n+='<div class="anar-benchmark-timestamp">',n+="<small>زمان تست: "+x(t.timestamp)+"</small>",n+="</div>"),n}(t)),void 0===t.wp_cron_disabled&&void 0===t.important_jobs||(n+=function(t){var n='<div class="anar-widget-section">',a=!1!==t.is_working,e=a?"anar-cron-status-success":"anar-cron-status-error";if(n+='<div class="anar-cron-overall-status '+e+'">',n+="<h4>وضعیت Cron:</h4>",n+='<div class="anar-cron-overall-status-badge '+e+'">'+(a?"✓ بله - Cron در حال کار است":"✗ خیر - Cron مشکل دارد")+"</div>",n+="</div>",t.wp_cron_disabled){var r="anar-cron-status-"+(t.wp_cron_disabled.status||(t.wp_cron_disabled.disabled?"warning":"success")),s=t.wp_cron_disabled.disabled?"⚠":"✓",o=t.wp_cron_disabled.disabled?"غیرفعال":"فعال";n+='<div class="anar-cron-status-item '+r+'">',n+='<div class="anar-cron-status-header">',n+='<span class="anar-cron-status-title">وضعیت WP Cron</span>',n+='<span class="anar-cron-status-badge '+r+'">'+s+" "+o+"</span>",n+="</div>",n+='<div class="anar-cron-status-message">'+x(t.wp_cron_disabled.message)+"</div>",n+="</div>"}if(t.wp_cron_status){var i="anar-cron-status-"+t.wp_cron_status.status;n+='<div class="anar-cron-status-item '+i+'">',n+='<div class="anar-cron-status-header">',n+='<span class="anar-cron-status-title">آخرین اجرای Cron</span>',n+='<span class="anar-cron-status-badge '+i+'">'+("success"===t.wp_cron_status.status?"✓":"warning"===t.wp_cron_status.status?"⚠":"✗")+"</span>",n+="</div>",t.wp_cron_status.last_run_formatted&&(n+='<div class="anar-cron-status-details">',n+="<span><strong>زمان:</strong> "+x(t.wp_cron_status.last_run_formatted)+"</span>",t.wp_cron_status.time_since_last_run_formatted&&(n+="<span><strong>مدت زمان:</strong> "+x(t.wp_cron_status.time_since_last_run_formatted)+"</span>"),n+="</div>"),n+='<div class="anar-cron-status-message">'+x(t.wp_cron_status.message)+"</div>",n+="</div>"}if(t.cron_spawn_test){var c=t.cron_spawn_test,l="anar-cron-status-"+c.status;n+='<div class="anar-cron-status-item '+l+'">',n+='<div class="anar-cron-status-header">',n+='<span class="anar-cron-status-title">تست HTTP برای wp-cron.php</span>',n+='<span class="anar-cron-status-badge '+l+'">'+("success"===c.status?"✓":"warning"===c.status?"⚠":"✗")+"</span>",n+="</div>",n+='<div class="anar-cron-status-details">',c.url&&(n+="<span><strong>URL:</strong> <code>"+x(c.url)+"</code></span>"),null!==c.status_code&&(n+="<span><strong>کد پاسخ:</strong> "+x(c.status_code)+"</span>"),null!==c.response_time&&(n+="<span><strong>زمان پاسخ:</strong> "+x(c.response_time)+" ms</span>"),c.error&&(n+="<span><strong>خطا:</strong> "+x(c.error)+"</span>"),n+="</div>",n+='<div class="anar-cron-status-message">'+x(c.message)+"</div>",n+="</div>"}return t.important_jobs&&Object.keys(t.important_jobs).length>0&&(n+='<div class="anar-cron-jobs">',n+="<h4>وظایف مهم:</h4>",n+='<div class="anar-cron-jobs-list">',Object.entries(t.important_jobs).forEach((function(t){var a=F(t,2),e=(a[0],a[1]),r="anar-cron-job-"+e.status;n+='<div class="anar-cron-job-item '+r+'">',n+='<div class="anar-cron-job-header">',n+='<div class="anar-cron-job-title-wrapper">',n+='<span class="anar-cron-job-name">'+x(e.display_name)+"</span>",e.hook_name&&(n+='<span class="anar-cron-job-hook">'+x(e.hook_name)+"</span>"),n+="</div>",n+='<span class="anar-cron-job-badge '+r+'">'+("success"===e.status?"✓":"warning"===e.status?"⚠":"✗")+"</span>",n+="</div>",n+='<div class="anar-cron-job-details">',e.scheduled?(n+='<span class="anar-cron-job-meta">',n+="<strong>زمان‌بندی:</strong> "+x(e.interval),n+="</span>",e.next_run_formatted&&(n+='<span class="anar-cron-job-meta">',n+="<strong>اجرای بعدی:</strong> "+x(e.next_run_formatted),n+="</span>")):(n+='<span class="anar-cron-job-meta anar-cron-job-error">',n+="<strong>زمان‌بندی:</strong> زمان‌بندی نشده",n+="</span>"),e.last_run_formatted?(n+='<span class="anar-cron-job-meta">',n+="<strong>آخرین اجرا:</strong> "+x(e.last_run_formatted),n+="</span>",e.time_since_last_run_formatted&&(n+='<span class="anar-cron-job-meta">',n+="<strong>مدت زمان:</strong> "+x(e.time_since_last_run_formatted),n+="</span>")):(n+='<span class="anar-cron-job-meta anar-cron-job-error">',n+="<strong>آخرین اجرا:</strong> هرگز اجرا نشده",n+="</span>"),n+="</div>",e.message&&(n+='<div class="anar-cron-job-message">'+x(e.message)+"</div>"),n+="</div>"})),n+="</div>",n+="</div>"),n+="</div>",t.timestamp&&(n+='<div class="anar-benchmark-timestamp">',n+="<small>زمان تست: "+x(t.timestamp)+"</small>",n+="</div>"),n}(t)),void 0!==t.cron_jobs&&Array.isArray(t.cron_jobs)&&void 0===t.strategies&&void 0===t.product_meta_stats&&(n+=function(t){var n='<div class="anar-widget-section">';return t.cron_jobs&&Array.isArray(t.cron_jobs)&&t.cron_jobs.length>0?(n+='<div class="anar-crontrol-jobs">',n+="<h4>Anar Cron Jobs:</h4>",n+='<div class="anar-crontrol-jobs-list">',t.cron_jobs.forEach((function(t){var a="anar-crontrol-cron-"+t.status;n+='<div class="anar-crontrol-job-item '+a+'">',n+='<div class="anar-crontrol-job-header">',n+='<span class="anar-crontrol-job-name">'+x(t.name)+"</span>",n+='<span class="anar-crontrol-job-badge '+a+'">'+("success"===t.status?"✓":"warning"===t.status?"⚠":"✗")+"</span>",n+="</div>",n+='<div class="anar-crontrol-job-details">',n+='<div class="anar-crontrol-job-info">',n+="<span><strong>Hook:</strong> <code>"+x(t.hook)+"</code></span>",n+="<span><strong>Schedule:</strong> "+x(t.interval)+"</span>",t.is_scheduled?t.next_run_formatted&&(n+="<span><strong>Next Run:</strong> "+x(t.next_run_formatted)+"</span>"):n+='<span class="anar-crontrol-not-scheduled">✗ Not scheduled</span>',n+="</div>",t.run_now_link&&(n+='<div class="anar-crontrol-job-actions">',n+='<a href="'+x(t.run_now_link)+'" class="button button-small button-primary" title="Run this cron job immediately">Run Now</a>',n+="</div>"),n+="</div>",n+="</div>"})),n+="</div>",n+="</div>"):n+='<p style="text-align: center; color: #666; padding: 20px;">No cron jobs found.</p>',n+="</div>",t.timestamp&&(n+='<div class="anar-benchmark-timestamp">',n+="<small>Report Time: "+x(t.timestamp)+"</small>",n+="</div>"),n}(t)),n||"<p>هیچ داده‌ای یافت نشد.</p>"}}])}();function R(t){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R(t)}function z(t,n){for(var a=0;a<n.length;a++){var e=n[a];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,H(e.key),e)}}function H(t){var n=function(t,n){if("object"!=R(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var e=a.call(t,n||"default");if("object"!=R(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==R(n)?n:n+""}var W=function(){return function(t,n,a){return n&&z(t.prototype,n),a&&z(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.currentFileId=null,this.currentFilename=null,this.autoRefreshInterval=null,this.autoRefreshEnabled=!1,this.init()}),[{key:"init",value:function(){this.bindEvents()}},{key:"bindEvents",value:function(){var t=this;m()(document).on("click",".anar-preview-log",(function(n){n.preventDefault();var a=m()(n.currentTarget),e=a.data("file-id"),r=a.data("filename");t.previewLogFile(e,r)})),m()(document).on("click","#anar-log-preview-refresh",(function(n){n.preventDefault(),t.currentFileId&&t.currentFilename&&t.refreshLogFile(!0)})),m()(document).on("change","#anar-log-preview-auto-refresh",(function(n){var a=m()(n.target).is(":checked");t.toggleAutoRefresh(a)}))}},{key:"previewLogFile",value:function(t,n){var a=this;this.currentFileId=t,this.currentFilename=n;m()("#anar-log-preview-modal");var e=m()("#anar-log-preview-loading"),r=m()("#anar-log-preview-content"),s=m()("#anar-log-preview-error"),o=m()("#anar-log-preview-text"),i=m()("#anar-log-preview-filename"),c=m()("#anar-log-preview-size"),l=m()("#anar-log-preview-lines"),u=m()("#anar-log-preview-truncated");e.show(),r.hide(),s.hide(),o.text(""),i.text(""),c.text(""),l.text(""),u.hide(),m()("#anar-log-preview-auto-refresh").prop("checked",!1),this.stopAutoRefresh(),d.show("anar-log-preview-modal",{onClose:function(){o.text(""),a.currentFileId=null,a.currentFilename=null,a.stopAutoRefresh(),m()("#anar-log-preview-auto-refresh").prop("checked",!1)}}),this.loadLogContent(t)}},{key:"refreshLogFile",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.currentFileId){var n=m()("#anar-log-preview-refresh"),a=n.find(".dashicons");t||(n.prop("disabled",!0),a.addClass("spin")),this.loadLogContent(this.currentFileId,(function(){t||(n.prop("disabled",!1),a.removeClass("spin"))}),t)}}},{key:"toggleAutoRefresh",value:function(t){this.autoRefreshEnabled=t,t?this.startAutoRefresh():this.stopAutoRefresh()}},{key:"startAutoRefresh",value:function(){var t=this;this.autoRefreshInterval&&(clearInterval(this.autoRefreshInterval),this.autoRefreshInterval=null),this.currentFileId&&(this.autoRefreshEnabled=!0,this.refreshLogFile(!0),this.autoRefreshInterval=setInterval((function(){t.currentFileId&&t.autoRefreshEnabled?t.refreshLogFile(!0):t.clearAutoRefreshInterval()}),1e3))}},{key:"clearAutoRefreshInterval",value:function(){this.autoRefreshInterval&&(clearInterval(this.autoRefreshInterval),this.autoRefreshInterval=null)}},{key:"stopAutoRefresh",value:function(){this.clearAutoRefreshInterval(),this.autoRefreshEnabled=!1}},{key:"loadLogContent",value:function(t){var n=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,e=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=m()("#anar-log-preview-loading"),s=m()("#anar-log-preview-content"),o=m()("#anar-log-preview-error"),i=m()("#anar-log-preview-text"),c=m()("#anar-log-preview-filename"),l=m()("#anar-log-preview-size"),d=m()("#anar-log-preview-lines"),u=m()("#anar-log-preview-truncated");s.is(":visible")||(r.show(),s.hide()),o.hide(),m().ajax({url:awca_ajax_object.ajax_url,type:"POST",data:{action:"anar_get_log_file_content",file_id:t,nonce:awca_ajax_object.nonce},success:function(t){if(r.hide(),t.success&&t.data){var p=t.data;c.text(p.filename),l.text(p.size_formatted),d.text(p.lines.toLocaleString()),p.truncated?u.show():u.hide();var h=0,m=0,v=!1;e||(h=i.scrollTop(),m=i[0].scrollHeight,v=h+i.outerHeight()>=m-10);var g=n.escapeHtml(p.content);i.html(g),e||v?i.scrollTop(i[0].scrollHeight):i.scrollTop(h),s.show(),a&&a()}else{var y,b=(null===(y=t.data)||void 0===y?void 0:y.message)||"خطا در بارگذاری فایل لاگ";o.html("<p><strong>خطا:</strong> ".concat(n.escapeHtml(b),"</p>")).show(),f(b,"error"),a&&a()}},error:function(t,e,s){r.hide();var i="خطا در ارتباط با سرور: ".concat(t.status," - ").concat(t.statusText);o.html("<p><strong>خطا:</strong> ".concat(n.escapeHtml(i),"</p>")).show(),f("خطا در ارتباط با سرور","error"),a&&a()}})}},{key:"escapeHtml",value:function(t){var n=document.createElement("div");return n.textContent=t,n.innerHTML}}])}();function G(t){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},G(t)}function q(){q=function(){return n};var t,n={},a=Object.prototype,e=a.hasOwnProperty,r=Object.defineProperty||function(t,n,a){t[n]=a.value},s="function"==typeof Symbol?Symbol:{},o=s.iterator||"@@iterator",i=s.asyncIterator||"@@asyncIterator",c=s.toStringTag||"@@toStringTag";function l(t,n,a){return Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{l({},"")}catch(t){l=function(t,n,a){return t[n]=a}}function d(t,n,a,e){var s=n&&n.prototype instanceof g?n:g,o=Object.create(s.prototype),i=new A(e||[]);return r(o,"_invoke",{value:L(t,a,i)}),o}function u(t,n,a){try{return{type:"normal",arg:t.call(n,a)}}catch(t){return{type:"throw",arg:t}}}n.wrap=d;var p="suspendedStart",f="suspendedYield",h="executing",m="completed",v={};function g(){}function y(){}function b(){}var w={};l(w,o,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(I([])));x&&x!==a&&e.call(x,o)&&(w=x);var k=b.prototype=g.prototype=Object.create(w);function j(t){["next","throw","return"].forEach((function(n){l(t,n,(function(t){return this._invoke(n,t)}))}))}function E(t,n){function a(r,s,o,i){var c=u(t[r],t,s);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==G(d)&&e.call(d,"__await")?n.resolve(d.__await).then((function(t){a("next",t,o,i)}),(function(t){a("throw",t,o,i)})):n.resolve(d).then((function(t){l.value=t,o(l)}),(function(t){return a("throw",t,o,i)}))}i(c.arg)}var s;r(this,"_invoke",{value:function(t,e){function r(){return new n((function(n,r){a(t,e,n,r)}))}return s=s?s.then(r,r):r()}})}function L(n,a,e){var r=p;return function(s,o){if(r===h)throw Error("Generator is already running");if(r===m){if("throw"===s)throw o;return{value:t,done:!0}}for(e.method=s,e.arg=o;;){var i=e.delegate;if(i){var c=S(i,e);if(c){if(c===v)continue;return c}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if(r===p)throw r=m,e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);r=h;var l=u(n,a,e);if("normal"===l.type){if(r=e.done?m:f,l.arg===v)continue;return{value:l.arg,done:e.done}}"throw"===l.type&&(r=m,e.method="throw",e.arg=l.arg)}}}function S(n,a){var e=a.method,r=n.iterator[e];if(r===t)return a.delegate=null,"throw"===e&&n.iterator.return&&(a.method="return",a.arg=t,S(n,a),"throw"===a.method)||"return"!==e&&(a.method="throw",a.arg=new TypeError("The iterator does not provide a '"+e+"' method")),v;var s=u(r,n.iterator,a.arg);if("throw"===s.type)return a.method="throw",a.arg=s.arg,a.delegate=null,v;var o=s.arg;return o?o.done?(a[n.resultName]=o.value,a.next=n.nextLoc,"return"!==a.method&&(a.method="next",a.arg=t),a.delegate=null,v):o:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,v)}function O(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function T(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function I(n){if(n||""===n){var a=n[o];if(a)return a.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var r=-1,s=function a(){for(;++r<n.length;)if(e.call(n,r))return a.value=n[r],a.done=!1,a;return a.value=t,a.done=!0,a};return s.next=s}}throw new TypeError(G(n)+" is not iterable")}return y.prototype=b,r(k,"constructor",{value:b,configurable:!0}),r(b,"constructor",{value:y,configurable:!0}),y.displayName=l(b,c,"GeneratorFunction"),n.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===y||"GeneratorFunction"===(n.displayName||n.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,c,"GeneratorFunction")),t.prototype=Object.create(k),t},n.awrap=function(t){return{__await:t}},j(E.prototype),l(E.prototype,i,(function(){return this})),n.AsyncIterator=E,n.async=function(t,a,e,r,s){void 0===s&&(s=Promise);var o=new E(d(t,a,e,r),s);return n.isGeneratorFunction(a)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},j(k),l(k,c,"Generator"),l(k,o,(function(){return this})),l(k,"toString",(function(){return"[object Generator]"})),n.keys=function(t){var n=Object(t),a=[];for(var e in n)a.push(e);return a.reverse(),function t(){for(;a.length;){var e=a.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},n.values=I,A.prototype={constructor:A,reset:function(n){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!n)for(var a in this)"t"===a.charAt(0)&&e.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var a=this;function r(e,r){return i.type="throw",i.arg=n,a.next=e,r&&(a.method="next",a.arg=t),!!r}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=e.call(o,"catchLoc"),l=e.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,n){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&e.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var s=r;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=n&&n<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=t,o.arg=n,s?(this.method="next",this.next=s.finallyLoc,v):this.complete(o)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),v},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.finallyLoc===t)return this.complete(a.completion,a.afterLoc),T(a),v}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc===t){var e=a.completion;if("throw"===e.type){var r=e.arg;T(a)}return r}}throw Error("illegal catch attempt")},delegateYield:function(n,a,e){return this.delegate={iterator:I(n),resultName:a,nextLoc:e},"next"===this.method&&(this.arg=t),v}},n}function U(t,n,a,e,r,s,o){try{var i=t[s](o),c=i.value}catch(t){return void a(t)}i.done?n(c):Promise.resolve(c).then(e,r)}function K(){jQuery(document).ready((function(t){var n=t("#anar-system-diagnostics"),a=t("#anar-system-diagnostics-modal"),e=t("#anar-diagnostics-tests-list"),r=t("#anar-diagnostics-summary"),s=t("#anar-diagnostics-summary-content"),o=t("#anar-diagnostics-loading"),i=t("#anar-diagnostics-error"),c=t("#anar-diagnostics-rerun"),l=[];function u(t){if(!t)return"";var n=document.createElement("div");return n.textContent=t,n.innerHTML}function p(n){return new Promise((function(a,e){t.ajax({url:awca_ajax_object.ajax_url,type:"POST",data:{action:"anar_run_system_diagnostics",test_id:n,nonce:awca_ajax_object.nonce},success:function(t){var n;t.success&&t.data?a(t.data):e(new Error((null===(n=t.data)||void 0===n?void 0:n.message)||"Test failed"))},error:function(t,n,a){e(new Error("Network error: "+a))}})}))}function f(n){e.empty(),l=[],n.forEach((function(n,a){var r=t("<div>",{class:"anar-diagnostics-test-item anar-diagnostics-test-pending","data-test-id":n.test_id});r.html('\n                    <div class="anar-diagnostics-test-header">\n                        <span class="anar-diagnostics-test-icon">\n                            <span class="spinner is-active" style="display: none;"></span>\n                            <span class="anar-diagnostics-test-check" style="display: none;">✓</span>\n                            <span class="anar-diagnostics-test-cross" style="display: none;">✗</span>\n                        </span>\n                        <span class="anar-diagnostics-test-name">'.concat(u(n.name),'</span>\n                    </div>\n                    <div class="anar-diagnostics-test-message" style="display: none;"></div>\n                ')),e.append(r)}))}function h(t,n){var a=e.find('[data-test-id="'.concat(t,'"]')),r=a.find(".anar-diagnostics-test-icon"),s=r.find(".spinner"),o=r.find(".anar-diagnostics-test-check"),i=r.find(".anar-diagnostics-test-cross"),c=a.find(".anar-diagnostics-test-message");a.removeClass("anar-diagnostics-test-pending"),n.passed?(a.addClass("anar-diagnostics-test-success"),s.hide(),o.show(),c.html('<span style="color: #46b450;">'.concat(u(n.message),"</span>")).show()):(a.addClass("anar-diagnostics-test-error"),s.hide(),i.show(),c.html('<span style="color: #dc3232;">'.concat(u(n.message),"</span>")).show()),l.push(n)}function m(){return v.apply(this,arguments)}function v(){return v=function(t){return function(){var n=this,a=arguments;return new Promise((function(e,r){var s=t.apply(n,a);function o(t){U(s,e,r,o,i,"next",t)}function i(t){U(s,e,r,o,i,"throw",t)}o(void 0)}))}}(q().mark((function n(){var a,s,d,m;return q().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o.show(),i.hide(),r.hide(),c.hide(),l=[],n.prev=5,n.next=8,new Promise((function(n,a){t.ajax({url:awca_ajax_object.ajax_url,type:"POST",data:{action:"anar_run_system_diagnostics",nonce:awca_ajax_object.nonce},success:function(t){var e;t.success&&t.data.tests?n(t.data.tests):a(new Error((null===(e=t.data)||void 0===e?void 0:e.message)||"Failed to get test list"))},error:function(t,n,e){a(new Error("Network error: "+e))}})}));case 8:f(a=n.sent),s=0;case 11:if(!(s<a.length)){n.next=29;break}return d=a[s],v=d.test_id,y=void 0,b=void 0,w=void 0,_=void 0,x=void 0,y=e.find('[data-test-id="'.concat(v,'"]')),b=y.find(".anar-diagnostics-test-icon"),w=b.find(".spinner"),_=b.find(".anar-diagnostics-test-check"),x=b.find(".anar-diagnostics-test-cross"),y.addClass("anar-diagnostics-test-pending"),w.show(),_.hide(),x.hide(),n.prev=14,n.next=17,p(d.test_id);case 17:m=n.sent,h(d.test_id,m),n.next=24;break;case 21:n.prev=21,n.t0=n.catch(14),h(d.test_id,{test_id:d.test_id,name:d.name,passed:!1,message:"خطا در اجرای تست: "+n.t0.message,details:{}});case 24:return n.next=26,new Promise((function(t){return setTimeout(t,300)}));case 26:s++,n.next=11;break;case 29:g(),c.show(),n.next=36;break;case 33:n.prev=33,n.t1=n.catch(5),i.html("<strong>خطا:</strong> ".concat(u(n.t1.message))).show();case 36:return n.prev=36,o.hide(),n.finish(36);case 39:case"end":return n.stop()}var v,y,b,w,_,x}),n,null,[[5,33,36,39],[14,21]])}))),v.apply(this,arguments)}function g(){var t=l.length,n=l.filter((function(t){return t.passed})).length,a=t-n,e=t>0?Math.round(n/t*100):0,o='\n                <div style="display: flex; align-items: center; gap: 20px; margin-bottom: 15px;">\n                    <div>\n                        <strong>کل تست‌ها:</strong> '.concat(t,'\n                    </div>\n                    <div style="color: #46b450;">\n                        <strong>موفق:</strong> ').concat(n,'\n                    </div>\n                    <div style="color: #dc3232;">\n                        <strong>ناموفق:</strong> ').concat(a,"\n                    </div>\n                    <div>\n                        <strong>درصد موفقیت:</strong> ").concat(e,"%\n                    </div>\n                </div>\n            ");a>0&&(o+='<div style="margin-top: 10px;"><strong>تست‌های ناموفق:</strong><ul style="margin: 10px 0; padding-right: 20px;">',l.filter((function(t){return!t.passed})).forEach((function(t){o+="<li>".concat(u(t.name),": ").concat(u(t.message),"</li>")})),o+="</ul></div>"),s.html(o),r.show()}function y(){e.empty(),r.hide(),o.hide(),i.hide(),c.hide(),l=[]}n.on("click",(function(t){t.preventDefault(),y(),d.show("anar-system-diagnostics-modal"),m()})),c.on("click",(function(t){t.preventDefault(),m()})),a.on("click","[data-micromodal-close]",(function(){y()}))}))}function Q(t){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Q(t)}function V(){V=function(){return n};var t,n={},a=Object.prototype,e=a.hasOwnProperty,r=Object.defineProperty||function(t,n,a){t[n]=a.value},s="function"==typeof Symbol?Symbol:{},o=s.iterator||"@@iterator",i=s.asyncIterator||"@@asyncIterator",c=s.toStringTag||"@@toStringTag";function l(t,n,a){return Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{l({},"")}catch(t){l=function(t,n,a){return t[n]=a}}function d(t,n,a,e){var s=n&&n.prototype instanceof g?n:g,o=Object.create(s.prototype),i=new A(e||[]);return r(o,"_invoke",{value:L(t,a,i)}),o}function u(t,n,a){try{return{type:"normal",arg:t.call(n,a)}}catch(t){return{type:"throw",arg:t}}}n.wrap=d;var p="suspendedStart",f="suspendedYield",h="executing",m="completed",v={};function g(){}function y(){}function b(){}var w={};l(w,o,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(I([])));x&&x!==a&&e.call(x,o)&&(w=x);var k=b.prototype=g.prototype=Object.create(w);function j(t){["next","throw","return"].forEach((function(n){l(t,n,(function(t){return this._invoke(n,t)}))}))}function E(t,n){function a(r,s,o,i){var c=u(t[r],t,s);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==Q(d)&&e.call(d,"__await")?n.resolve(d.__await).then((function(t){a("next",t,o,i)}),(function(t){a("throw",t,o,i)})):n.resolve(d).then((function(t){l.value=t,o(l)}),(function(t){return a("throw",t,o,i)}))}i(c.arg)}var s;r(this,"_invoke",{value:function(t,e){function r(){return new n((function(n,r){a(t,e,n,r)}))}return s=s?s.then(r,r):r()}})}function L(n,a,e){var r=p;return function(s,o){if(r===h)throw Error("Generator is already running");if(r===m){if("throw"===s)throw o;return{value:t,done:!0}}for(e.method=s,e.arg=o;;){var i=e.delegate;if(i){var c=S(i,e);if(c){if(c===v)continue;return c}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if(r===p)throw r=m,e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);r=h;var l=u(n,a,e);if("normal"===l.type){if(r=e.done?m:f,l.arg===v)continue;return{value:l.arg,done:e.done}}"throw"===l.type&&(r=m,e.method="throw",e.arg=l.arg)}}}function S(n,a){var e=a.method,r=n.iterator[e];if(r===t)return a.delegate=null,"throw"===e&&n.iterator.return&&(a.method="return",a.arg=t,S(n,a),"throw"===a.method)||"return"!==e&&(a.method="throw",a.arg=new TypeError("The iterator does not provide a '"+e+"' method")),v;var s=u(r,n.iterator,a.arg);if("throw"===s.type)return a.method="throw",a.arg=s.arg,a.delegate=null,v;var o=s.arg;return o?o.done?(a[n.resultName]=o.value,a.next=n.nextLoc,"return"!==a.method&&(a.method="next",a.arg=t),a.delegate=null,v):o:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,v)}function O(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function T(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function I(n){if(n||""===n){var a=n[o];if(a)return a.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var r=-1,s=function a(){for(;++r<n.length;)if(e.call(n,r))return a.value=n[r],a.done=!1,a;return a.value=t,a.done=!0,a};return s.next=s}}throw new TypeError(Q(n)+" is not iterable")}return y.prototype=b,r(k,"constructor",{value:b,configurable:!0}),r(b,"constructor",{value:y,configurable:!0}),y.displayName=l(b,c,"GeneratorFunction"),n.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===y||"GeneratorFunction"===(n.displayName||n.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,c,"GeneratorFunction")),t.prototype=Object.create(k),t},n.awrap=function(t){return{__await:t}},j(E.prototype),l(E.prototype,i,(function(){return this})),n.AsyncIterator=E,n.async=function(t,a,e,r,s){void 0===s&&(s=Promise);var o=new E(d(t,a,e,r),s);return n.isGeneratorFunction(a)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},j(k),l(k,c,"Generator"),l(k,o,(function(){return this})),l(k,"toString",(function(){return"[object Generator]"})),n.keys=function(t){var n=Object(t),a=[];for(var e in n)a.push(e);return a.reverse(),function t(){for(;a.length;){var e=a.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},n.values=I,A.prototype={constructor:A,reset:function(n){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!n)for(var a in this)"t"===a.charAt(0)&&e.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var a=this;function r(e,r){return i.type="throw",i.arg=n,a.next=e,r&&(a.method="next",a.arg=t),!!r}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=e.call(o,"catchLoc"),l=e.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,n){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&e.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var s=r;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=n&&n<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=t,o.arg=n,s?(this.method="next",this.next=s.finallyLoc,v):this.complete(o)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),v},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.finallyLoc===t)return this.complete(a.completion,a.afterLoc),T(a),v}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc===t){var e=a.completion;if("throw"===e.type){var r=e.arg;T(a)}return r}}throw Error("illegal catch attempt")},delegateYield:function(n,a,e){return this.delegate={iterator:I(n),resultName:a,nextLoc:e},"next"===this.method&&(this.arg=t),v}},n}function $(t,n,a,e,r,s,o){try{var i=t[s](o),c=i.value}catch(t){return void a(t)}i.done?n(c):Promise.resolve(c).then(e,r)}function Y(t){return function(){var n=this,a=arguments;return new Promise((function(e,r){var s=t.apply(n,a);function o(t){$(s,e,r,o,i,"next",t)}function i(t){$(s,e,r,o,i,"throw",t)}o(void 0)}))}}function J(){var t=document.getElementById("awca-open-single-product-modal-legacy"),n=document.getElementById("awca-single-product-modal-legacy"),a=document.getElementById("awca-single-product-form-legacy"),e=document.getElementById("awca-single-product-sku-legacy"),r=document.getElementById("awca-single-product-feedback-legacy"),s=document.getElementById("awca-single-product-logs-legacy"),o=document.getElementById("awca-single-product-logs-container-legacy");if(t&&n&&a){var i=function(){var t=Y(V().mark((function t(n){var a,e,r,s,o,i=arguments;return V().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=i.length>1&&void 0!==i[1]?i[1]:{},"undefined"!=typeof awca_ajax_object){t.next=3;break}throw new Error("AJAX object not found");case 3:return(e=new FormData).append("action",n),e.append("security",awca_ajax_object.nonce),Object.keys(a).forEach((function(t){e.append(t,a[t])})),t.next=9,fetch(awca_ajax_object.ajax_url,{method:"POST",body:e});case 9:return r=t.sent,t.next=12,r.json();case 12:if((s=t.sent).success){t.next=15;break}throw new Error((null===(o=s.data)||void 0===o?void 0:o.message)||"خطای نامشخص رخ داد.");case 15:return t.abrupt("return",s.data);case 16:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),c=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";if(o){var a=document.createElement("p"),e=(new Date).toLocaleTimeString();a.textContent="[".concat(e,"] ").concat(t),a.dataset.type=n,"success"===n?a.style.color="#2e8b57":"error"===n&&(a.style.color="#d63638"),o.appendChild(a),o.scrollTop=o.scrollHeight}},l=function(){n&&n.setAttribute("aria-hidden","true")},d=function(){var t=Y(V().mark((function t(n){var o,l,d;return V().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),a&&e){t.next=3;break}return t.abrupt("return");case 3:if(o=e.value.trim()){t.next=7;break}return r&&(r.textContent="لطفاً شناسه SKU را وارد کنید.",r.className="awca-modal-feedback awca-modal-feedback--error"),t.abrupt("return");case 7:return a.classList.add("is-loading"),r&&(r.textContent="",r.className="awca-modal-feedback"),t.prev=9,t.next=12,i("awca_create_single_product_legacy",{anar_sku:o});case 12:l=t.sent,s&&(s.style.display="block"),d=l.created?"ساخته شد":"به‌روزرسانی شد",c("محصول با SKU ".concat(o," ").concat(d," (ID: ").concat(l.product_id||"نامشخص",")"),"success"),r&&(r.textContent=l.message||"عملیات با موفقیت انجام شد.",r.className="awca-modal-feedback awca-modal-feedback--success"),a.reset(),t.next=25;break;case 20:t.prev=20,t.t0=t.catch(9),r&&(r.textContent=t.t0.message,r.className="awca-modal-feedback awca-modal-feedback--error"),s&&(s.style.display="block"),c(t.t0.message,"error");case 25:return t.prev=25,a.classList.remove("is-loading"),t.finish(25);case 28:case"end":return t.stop()}}),t,null,[[9,20,25,28]])})));return function(n){return t.apply(this,arguments)}}();t.addEventListener("click",(function(t){t.preventDefault(),n&&(n.setAttribute("aria-hidden","false"),r&&(r.textContent="",r.className="awca-modal-feedback"),null==a||a.classList.remove("is-loading"),null==a||a.reset(),o&&(o.innerHTML=""),s&&(s.style.display="none"),null==e||e.focus())})),a.addEventListener("submit",d),n.addEventListener("click",(function(t){t.target.closest("[data-modal-close]")&&(t.preventDefault(),l())})),document.addEventListener("keydown",(function(t){"Escape"===t.key&&"false"===(null==n?void 0:n.getAttribute("aria-hidden"))&&l()}))}}jQuery(document).ready((function(t){d.init(),jQuery(document).ready((function(t){t("#anar-create-indexes").on("click",(function(n){n.preventDefault();var a=t(this),e=a.html();a.prop("disabled",!0).html('<span class="dashicons dashicons-update"></span> در حال بهینه‌سازی...'),t("#anar-performance-status").show(),t("#anar-performance-message").html('<span class="dashicons dashicons-update" style="animation: spin 1s linear infinite;"></span> در حال بهینه‌سازی پایگاه داده...'),t.ajax({url:awca_ajax_object.ajax_url,type:"POST",data:{action:"anar_create_indexes"},success:function(n){if(n.success){var a=n.data,e='\n                          <div style="margin-bottom: 15px;">\n                            <span class="dashicons dashicons-yes-alt" style="color: #46b450;"></span> '.concat(a.message,"\n                          </div>\n                        ");t("#anar-performance-message").html(e),f(a.message,"success")}else t("#anar-performance-message").html('<span class="dashicons dashicons-warning" style="color: #dc3232;"></span> '+n.data.message),f(n.data.message,"error")},error:function(n,a,e){var r="خطا در ارتباط با سرور";t("#anar-performance-message").html('<span class="dashicons dashicons-warning" style="color: #dc3232;"></span> '+r),f(r,"error")},complete:function(){a.prop("disabled",!1).html(e)}})}))})),jQuery(document).ready((function(t){t("#anar-clear-sync-times").on("click",(function(n){confirm("تایم آخرین بروزرسانی همه محصولات ریست می شوند و باید صبر کنید تا همه محصولاتت مجدد سینک شوند. مطمئنید؟"),n.preventDefault();var a=t(this),e=a.html();a.prop("disabled",!0).html('<span class="dashicons dashicons-update"></span> در حال بهینه‌سازی...'),t("#anar-performance-status").show(),t("#anar-performance-message").html('<span class="dashicons dashicons-update" style="animation: spin 1s linear infinite;"></span> در حال بهینه‌سازی پایگاه داده...'),t.ajax({url:awca_ajax_object.ajax_url,type:"POST",data:{action:"anar_clear_sync_times"},success:function(n){if(n.success){var a=n.data,e='\n                          <div style="margin-bottom: 15px;">\n                            <span class="dashicons dashicons-yes-alt" style="color: #46b450;"></span> '.concat(a.message,'\n                            <div style="margin-top: 10px; font-size: 12px; color: #666;">\n                              <strong>جزئیات:</strong><br>\n                              • محصولات بروزرسانی شده: ').concat(a.updated_count,"<br>\n                              • محصولات جدید اضافه شده: ").concat(a.inserted_count,"<br>\n                              • کل محصولات پردازش شده: ").concat(a.total_processed,"<br>\n                              • تاریخ تنظیم شده: ").concat(a.reset_date,"\n                            </div>\n                          </div>\n                        ");t("#anar-performance-message").html(e),f(a.message,"success")}else t("#anar-performance-message").html('<span class="dashicons dashicons-warning" style="color: #dc3232;"></span> '+n.data.message),f(n.data.message,"error")},error:function(n,a,e){var r="خطا در ارتباط با سرور";t("#anar-performance-message").html('<span class="dashicons dashicons-warning" style="color: #dc3232;"></span> '+r),f(r,"error")},complete:function(){a.prop("disabled",!1).html(e)}})})),t("#anar-manual-sync-outdated").on("click",(function(n){n.preventDefault();var a=t(this),e=a.html();a.prop("disabled",!0).html('<span class="dashicons dashicons-update"></span> در حال اجرا...'),t("#anar-performance-status").show(),t("#anar-performance-message").html('<span class="dashicons dashicons-update" style="animation: spin 1s linear infinite;"></span> در حال اجرای همگام‌سازی محصولات منسوخ...'),t.ajax({url:awca_ajax_object.ajax_url,type:"POST",data:{action:"anar_manual_sync_outdated"},success:function(n){if(n.success){var a=n.data,e='\n                          <div style="margin-bottom: 15px;">\n                            <span class="dashicons dashicons-yes-alt" style="color: #46b450;"></span> '.concat(a.message,'\n                            <div style="margin-top: 10px; font-size: 12px; color: #666;">\n                              <strong>جزئیات:</strong><br>\n                              • محصولات پردازش شده: ').concat(a.processed,"<br>\n                              • محصولات ناموفق: ").concat(a.failed,"<br>\n                              • کل محصولات بررسی شده: ").concat(a.total_checked,"\n                            </div>\n                          </div>\n                        ");t("#anar-performance-message").html(e),f(a.message,"success")}else t("#anar-performance-message").html('<span class="dashicons dashicons-warning" style="color: #dc3232;"></span> '+n.data.message),f(n.data.message,"error")},error:function(n,a,e){var r="خطا در ارتباط با سرور";t("#anar-performance-message").html('<span class="dashicons dashicons-warning" style="color: #dc3232;"></span> '+r),f(r,"error")},complete:function(){a.prop("disabled",!1).html(e)}})}))})),jQuery(document).ready((function(t){t("#anar-test-performance").on("click",(function(n){n.preventDefault();var a=t(this),e=a.html();a.prop("disabled",!0).html('<span class="dashicons dashicons-update"></span> در حال تست...'),t("#anar-performance-status").show(),t("#anar-performance-message").html('<span class="dashicons dashicons-update" style="animation: spin 1s linear infinite;"></span> در حال تست عملکرد کوئری‌ها...'),t.ajax({url:awca_ajax_object.ajax_url,type:"POST",data:{action:"anar_test_query_performance"},success:function(n){if(n.success){var a=n.data,e='\n                        <div style="margin-bottom: 15px;">\n                          <h4 style="margin: 0 0 10px 0;">نتایج تست عملکرد:</h4>\n                          <table style="width: 100%; border-collapse: collapse;">\n                            <tr style="border-bottom: 1px solid #ddd;">\n                              <td style="padding: 5px;"><strong>روش قدیمی:</strong></td>\n                              <td style="padding: 5px;">'.concat(a.old_approach.time,"ms (").concat(a.old_approach.count,' محصول)</td>\n                            </tr>\n                            <tr style="border-bottom: 1px solid #ddd;">\n                              <td style="padding: 5px;"><strong>روش جدید:</strong></td>\n                              <td style="padding: 5px;">').concat(a.new_approach.time,"ms (").concat(a.new_approach.count,' محصول)</td>\n                            </tr>\n                            <tr>\n                              <td style="padding: 5px;"><strong>بهبود:</strong></td>\n                              <td style="padding: 5px; color: #46b450; font-weight: bold;">').concat(a.improvement,"% سریع‌تر</td>\n                            </tr>\n                          </table>\n                        </div>\n                      ");t("#anar-performance-message").html('<span class="dashicons dashicons-chart-line" style="color: #46b450;"></span>'+e),f("تست عملکرد با موفقیت انجام شد","success")}else t("#anar-performance-message").html('<span class="dashicons dashicons-warning" style="color: #dc3232;"></span> '+n.data.message),f(n.data.message,"error")},error:function(n,a,e){var r="خطا در ارتباط با سرور";t("#anar-performance-message").html('<span class="dashicons dashicons-warning" style="color: #dc3232;"></span> '+r),f(r,"error")},complete:function(){a.prop("disabled",!1).html(e)}})})),t("#anar-check-index-status").on("click",(function(n){n.preventDefault();var a=t(this),e=a.html();a.prop("disabled",!0).html('<span class="dashicons dashicons-update"></span> در حال بررسی...'),t("#anar-performance-status").show(),t("#anar-performance-message").html('<span class="dashicons dashicons-update" style="animation: spin 1s linear infinite;"></span> در حال بررسی وضعیت ایندکس‌ها...'),t.ajax({url:awca_ajax_object.ajax_url,type:"POST",data:{action:"anar_check_index_status"},success:function(n){if(n.success){var a=n.data,e='<div style="margin-bottom: 15px;">';e+='<h4 style="margin: 0 0 10px 0;">وضعیت ایندکس‌های پایگاه داده:</h4>';var r=a.all_exist?'<span style="color: #46b450; font-weight: bold;">✓ همه ایندکس‌ها موجود هستند</span>':'<span style="color: #dc3232; font-weight: bold;">✗ برخی ایندکس‌ها موجود نیستند</span>';e+='<div style="margin-bottom: 10px;">'.concat(r,"</div>"),e+='<table style="width: 100%; border-collapse: collapse; font-size: 12px;">',e+='<tr style="border-bottom: 1px solid #ddd;"><th style="padding: 5px; text-align: left;">ایندکس</th><th style="padding: 5px; text-align: left;">وضعیت</th></tr>',Object.keys(a.status).forEach((function(t){var n="exists"===a.status[t]?'<span style="color: #46b450;">✓ موجود</span>':'<span style="color: #dc3232;">✗ موجود نیست</span>';e+='<tr style="border-bottom: 1px solid #eee;">\n                          <td style="padding: 5px;">'.concat(t,'</td>\n                          <td style="padding: 5px;">').concat(n,"</td>\n                        </tr>")})),e+="</table>",e+='<div style="margin-top: 10px; font-size: 11px; color: #666;">\n                        '.concat(a.existing_count," از ").concat(a.total_required," ایندکس موجود است\n                      </div>"),e+="</div>",t("#anar-performance-message").html('<span class="dashicons dashicons-list-view" style="color: #0073aa;"></span>'+e),a.all_exist?f("همه ایندکس‌ها موجود هستند","success"):f('برخی ایندکس‌ها موجود نیستند. برای بهبود عملکرد، روی "بهینه‌سازی و ریست زمان‌ها" کلیک کنید.',"warning")}else t("#anar-performance-message").html('<span class="dashicons dashicons-warning" style="color: #dc3232;"></span> '+n.data.message),f(n.data.message,"error")},error:function(n,a,e){var r="خطا در ارتباط با سرور";t("#anar-performance-message").html('<span class="dashicons dashicons-warning" style="color: #dc3232;"></span> '+r),f(r,"error")},complete:function(){a.prop("disabled",!1).html(e)}})}))})),m()(document).ready((function(){new _({modalId:"anar-zero-profit-modal",buttonId:"anar-zero-profit-products",title:"محصولات با سود صفر",action:"anar_get_zero_profit_products",changeStatusAction:null,warningText:null}),new _({modalId:"anar-deprecated-modal",buttonId:"anar-deprecated-products",title:"محصولات منسوخ شده",action:"anar_get_deprecated_products",changeStatusAction:"anar_change_deprecated_status",changeStatusText:'تغییر وضعیت به "در انتظار بررسی"',warningText:'آیا مطمئن هستید که می‌خواهید وضعیت همه محصولات منسوخ را به "در انتظار بررسی" تغییر دهید؟'}),new _({modalId:"anar-duplicate-modal",buttonId:"anar-duplicate-products",title:"محصولات تکراری",action:"anar_get_duplicate_products",changeStatusAction:"anar_change_duplicate_status",changeStatusText:'تغییر وضعیت تکراری‌ها به "در انتظار بررسی"',warningText:'آیا مطمئن هستید که می‌خواهید محصولات تکراری را به "در انتظار بررسی" تغییر دهید؟\n\nقدیمی‌ترین محصول از هر گروه حفظ می‌شود.'}),new _({modalId:"anar-need-fix-modal",buttonId:"anar-need-fix-products",title:"محصولات نیازمند تعمیر",action:"anar_get_need_fix_products",changeStatusAction:"anar_manual_fix_products",changeStatusText:"اجرای دستی تعمیر محصولات",warningText:"آیا مطمئن هستید که می‌خواهید عملیات تعمیر محصولات را اجرا کنید؟"})})),new B,new W,K(),J()}))})()})();